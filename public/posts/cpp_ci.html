<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
<meta charset="UTF-8">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-10Y7GMS7GV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-10Y7GMS7GV');
    </script>

    <script type="text/javascript" src="//code.typesquare.com/static/ZDbTe4IzCko%253D/ts106f.js"
        charset="utf-8"></script>

    <title> C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ </title>

    <meta property="og:title" content="C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹">
    <meta property="og:image" content="https://abap34.com/posts/cpp_ci/image-7.png">
    <meta property="og:description" content="C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® CI ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã™ã€‚ Meson ã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰ã€ GitHub Actions + (Google Test, Google Benchmark) ã«ã‚ˆã‚‹ç¶™ç¶šçš„ãƒ†ã‚¹ãƒˆã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã€ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ã‚’è¡Œã„ã¾ã™ã€‚">
    <meta property="og:url" content="https://abap34.com/posts/cpp_ci.html">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="abap34's blog">
    <meta property="og:locale" content="ja_JP">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@abap34" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/julia.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/julia-repl.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/scheme.min.js"></script>


    <script>hljs.highlightAll();</script>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2/dist/confetti.browser.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ext-language_tools.js"></script>

    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>


    <style>body {
    max-width: 1200px;
    margin-right: auto;
    margin-left: auto;
    background-color: rgb(240, 244, 246);
    font-family: "UDæ–°ã‚´NT M", "Yu Gothic", "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
    color: #333;

}


.article-body {
    display: grid;
    grid-template-columns: 1fr 5fr;
    background-color: white;
    padding: 30px;
    border-radius: 10px;
    word-wrap: break-word;
}

@media (max-width: 1200px) {
    .side #toc {
        display: none;
    }

    .article-body {
        display: block !important;
        padding-left: 10px !important;
        padding-right: 10px !important;
        margin: 10px !important;
        margin-right: 10px !important;
        margin-left: 10px !important;
    }

    .content {
        margin-right: 30px !important;
        margin-left: 5px !important;
        padding-right: 20px !important;
        padding-left: 5px !important;
    }

}

.side {
    order: 1;
    border-right: solid 1px #ddd;
    padding-right: 20px;
}

.content {
    order: 2;
    padding: 20px;
    width: 95%;
    max-width: 900px;
    margin: auto;
    padding: auto;
}


.side-sticky {
    position: sticky;
    top: 20px;
}


.article-header {
    padding-top: 30px;
    margin: 10px;
}



.article-header .title {
    color: #001e43;
    font-size: 1.4rem;
    font-weight: bold;
    border-bottom: dotted 3px #001e43;
    text-align: center;
    padding-left: 10px;
    padding-right: 10px;
}

.date {
    font-size: 14px;
    text-align: center;
    color: gray;
}

.date::before {
    content: "\f073";
    font-family: "Font Awesome 5 Free";
}

.tag-placeholder {
    text-align: center;
    margin-bottom: 20px;
}

.tag {
    display: inline-block;
    margin-right: 0.5rem;
    padding: 0.2rem 0.5rem;
    font-size: 0.8rem;
    border-radius: 5px;
    border: 1px solid gray;
}

.tag a {
    color: #666;
    text-decoration-line: none;
}


.toc_title {
    display: none;
}

.math-block {
    overflow-x: auto;
    overflow-y: hidden;
}

.math-inline {
    display: inline-grid;
    overflow-x: hidden;
    ;
}

mjx-container {
    display: inline-block;
    overflow-x: auto;
    overflow-y: hidden;
    max-width: 100%;
}

h2 {
    border-left: solid 5px #85c0ff;
    padding-left: 10px;
    padding-bottom: 0;
    margin-bottom: 0;
}


img {
    max-width: 100% !important;
    height: auto;
}

@media (max-width: 1200px) {
    figure {
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        overflow: hidden;
        padding: 20px;
    }
}


figure {
    text-align: center;
    color: gray;
}


h3 {
    border-bottom: 1px solid #ddd !important;
    padding-bottom: 5px;
    margin-bottom: 0px;
}

h4 {
    padding-bottom: 5px;
    margin-bottom: 0px;
}

pre {
    padding: 10px;
}

.tex-equations {
    overflow-x: auto;
}

table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
}

th,
td {
    border: 1px solid #ddd;
    padding: 8px;
}

.exec_out {
    color: white;
}

@media (max-width: 1200px) {
    .exec_plot {
        width: 100%;
        overflow-x: auto;
    }
}

#toc {
    border-radius: 4px;
    padding: 15px;
    padding-left: 0px;
    list-style: none;
}

#toc a {
    text-decoration: none;
    color: #777;
    display: block;
    margin: 5px 0;
    transition: color 0.2s;
}

#toc a:hover {
    color: #007bff;
}

#toc .active {
    font-weight: bold;
    color: #007bff;
    font-size: 1.1em;
}

#toc {
    list-style: none;
    padding: 0;
    border-left: 2px dotted #a3c5db;
    border-radius: 0%;
}

#toc li {
    padding-left: 20px;
    margin-top: 10px;
    position: relative;
}

/* #toc li::before {
    content: '';
    width: 10px;
    height: 10px;
    background: #c4e4f9;
    border-radius: 50%;
    border: 1px solid #a3c5db;
    position: absolute;
    left: -7px;
    top: 0;
    transform: translateY(50%);
} */

.toc_H1 {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #007bff;
    font-weight: bold;
}


.toc_H2 {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #007bff;
    font-weight: bold;
}

/* .toc_H2::before {
    background: #f8f8f8 !important;
    border: 1px solid #3498db !important;
} */

.toc_H3 {
    font-size: 12px;
    margin-bottom: 10px;
    color: #007bff;
    padding-left: 10px;
}

.toc_H3::before {
    display: none !important;
}

#toposts,
#tohome,
#torss {
    display: inline-block;
    text-decoration: none;
}


.links {
    border-top: solid 1px #ddd;
    padding-top: 20px;
    color: hwb(211 18% 52%);
}

.links a {
    text-decoration: none;
    color: #3c3c3c;
}

.links {
    /* ç­‰å¹…ãƒ•ã‚©ãƒ³ãƒˆ */
    font-family: "Noto Sans Mono", monospace;
}

#toposts {
    color: #979797 !important;

}

#tohome {
    color: #b8792c !important;
}

#torss {
    color: #d88914 !important;
}

#twitter {
    color: #1da1f2 !important;
}

#github {
    color: #000000 !important;
}

#mail {
    color: #bbbbbb !important;
}


.content_list_h1 {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
    border-bottom: solid 1px #007bff;
    color: #007bff;
}

.content_list_h2 {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #007bff;
}

.content_list_problem {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #007bff;
}

.badge {
    padding: 8px 20px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: bold;
    color: #777;
    border: 1px solid #444;
    margin: 0 8px;
    float: left;
}

.runbutton,
.submitbutton {
    display: inline-block;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    color: #fff;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
}

.runbutton {
    background-color: #007bff;
}

.runbutton:hover {
    background-color: #005580;
}

.submitbutton {
    background-color: #008000;
}

.submitbutton:hover {
    background-color: #006400;
}

.problem_title {
    font-size: 20px;
    font-weight: bold;
    color: #333;
}

.editor {
    width: 100%;
    height: 300px;
    font-size: 16px;
    font-family: monospace;
    background-color: #f0f0f0;
    color: #333;
    padding: 10px;
    border: solid 1px #ddd;
}

.output,
.expect_out,
.sample_in,
.sample_out {
    width: 100%;
    padding: 5px 5px;
    overflow-x: auto;
    font-size: 16px;
    font-family: monospace;
    background-color: #f0f0f0;
    color: #333;
    border: solid 1px #ddd;
}

.box-title,
.problem_list {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #777;
}

pre {
    background-color: #282c34;
    border-radius: 5px;
}

pre code {
    color: #e8ebf0;
    line-height: 1.2;
    font-family: monospace;
}

.inline-code {
    font-family: monospace;
    line-height: 1.2;
    color: #e43e3ee0;
}

.success,
.info,
.warning,
.danger {
    padding: 12px;
    border: 1px solid;
    border-radius: 4px;
}

.success {
    color: #3c763d;
    background-color: #dff0d8;
    border-color: #d6e9c6;
}

.info {
    color: #31708f;
    background-color: #d9edf7;
    border-color: #bce8f1;
}

.warning {
    color: #8a6d3b;
    background-color: #fcf8e3;
    border-color: #faebcc;
}

.danger {
    color: #a94442;
    background-color: #f2dede;
    border-color: #ebccd1;
}

.definition {
    counter-increment: definition;
    border: #31708f 3px dotted;
    border-left: #31708fa1 5px solid;
}

.definition::before {
    content: "Definition " counter(definition) ".";
}

.theorem {
    counter-increment: theorem;
    border: #318f5a 3px dotted;
    border-left: #318f4fa1 5px solid;
}

.theorem::before {
    content: "Theorem " counter(theorem) ".";
}

.lemma {
    counter-increment: lemma;
    border: #ab5b64 3px dotted;
    border-left: #d071a4a1 5px solid;
}

.lemma::before {
    content: "Lemma " counter(lemma) ".";
}

.proof {
    counter-increment: proof;
    border: #5b64ab 3px dotted;
    border-left: #8cc1e7a1 5px solid;
}

.proof::before {
    content: "Proof " counter(proof) ".";
}

.definition::before,
.theorem::before,
.proof::before,
.lemma::before {
    font-family: serif;
    font-size: large;
    font-weight: 600;
    font-style: italic;
    display: block;
}


.definition,
.theorem,
.proof,
.lemma {
    padding: 12px;
    margin: 12px;
}

.proof::after {
    content: "âˆ";
    margin-left: auto;
    display: block;
}

iframe {
    width: 100%;
}


a {
    color: #006699;
    word-break: break-all;
}

.lined {
    background: linear-gradient(transparent 70%, rgba(255, 165, 0, 0.6) 0) no-repeat;
    display: inline;
}


.footnote::before {
    content: "Footnote: ";
    font-weight: bold;
}

.footnote {
    border-top: solid 1px #ddd;
    font-style: italic;
    color: #777;
}


.footnote>* {
    display: block;
}

/* å¼•ç”¨ */
blockquote {
    border-left: solid 5px #ddd;
    padding-left: 10px;
    margin-left: 0;
    color: #a8a8a8 !important;
    font-weight: bold !important;
}</style>

    <script>
        page_contents = []
    </script>

    <!-- Runner is not required. Skip this. -->


</head>


<body>

    <div class="article-header">

        <div class="title">
            C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹
        </div>

        <script>
            title = document.querySelector(".title").innerHTML;
        </script>

        <br>
        <div class="date">
            2024/09/23
        </div>
        <br>
        <div class="tag-placeholder">
            [C++, CI, GitHub Actions, Google Test, Google Benchmark, Meson]
        </div>

    </div>

    <div class="article-body">
        <div class="content">
            <br><script>page_contents.push({
    "type":"H2",
    "id":"2",
    "title":"ã¯ã˜ã‚ã«"
});
</script>
<h2 id="2">ã¯ã˜ã‚ã«</h2><br><blockquote>äººé¡ã¯ã¾ã ãƒ†ã‚¹ãƒˆã‚’ä¸è¦ã¨ã™ã‚‹æŠ€è¡“ã‚’é–‹ç™ºã—ã¦ã„ãªã„ã®ã§ã€ãƒ†ã‚¹ãƒˆã¯ã„ã‚‹ã‚“ã§ã™ã­. <span class="footnote-ref"><sup id="ref_1"><a href="#label_1">[1]</a></sup></span> </blockquote><br><br>ã¨ã„ã†ã‚ã‘ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã™ã€‚ GitHub ã§ C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚„ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã€<br><ul><li>Google Test ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ã</li><li>Google Benchmark ã§ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚‹</li><li>ãã‚Œã®çµæœã®æ¨ç§»ã®çµ±è¨ˆã‚’ GitHub Pages ã§ã„ã„æ„Ÿã˜ã«è¡¨ç¤ºã™ã‚‹</li><li>Codecov ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’è¨ˆæ¸¬ã™ã‚‹</li></ul><br>ã‚ãŸã‚Šã‚’æ•´å‚™ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã™ã€‚<br>æœ€åˆã¯ CMake ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€ã‚„ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‰¹æœ‰ã®äº‹æƒ…ã‚‚ã‚ã‚Šã€æœ¬å½“ã«è¾›ããªã£ã¦ã—ã¾ã£ãŸã®ã§ Meson ã¨ã„ã†ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚<br>(è‡ªåˆ†ã¯ C++ ã‚’ã‚ã¾ã‚Šä½¿ã‚ãªã„ã®ã§ã‚ã¾ã‚Šã“ã®è¾ºã«ã¯è©³ã—ããªã„ã§ã™ãŒã€ Scipy ã®ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€ã¨ã„ã†ã®ã‚’çŸ¥ã£ã¦ã„ãŸã®ã§ä½¿ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸã€‚)<br>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å…ˆé ­ã«ã¯ã“ã‚“ãªæ„Ÿã˜ã®ã“ã¨ãŒæ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚<br><blockquote>Meson is an open source build system meant to be both extremely fast, and, even more importantly, as user friendly as possible.</blockquote>The main design point of Meson is that every moment a developer spends writing or debugging build definitions is a second wasted. So is every second spent waiting for the build system to actually start compiling code.<br>user friendry, ã„ã„ã“ã¨ã°ã§ã™ã­ (ã»ã‚“ã¨ã«)<br>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ã„ã¡ãŠã†ã‚ã‚Šã¾ã™.ã€€<url> <a href="https://mesonbuild.com/index.html">https://mesonbuild.com/index.html</a> </url><br>æ­£ç›´ã‚ã¾ã‚Šç¶²ç¾…çš„ã«ã¯æ›¸ã„ã¦ãã‚Œã¦ã„ãªã„å°è±¡ã§ã™ãŒ... ğŸ˜¢ <br><span class="strong"> <strong>ã“ã“ã‹ã‚‰æœ¬å½“ã«æ‰‹é †ã‚’æ›¸ã„ã¦ã„ã‚‹ã ã‘ãªã®ã§é¢ç™½ãã¯ãªã„ã§ã™ã€‚</strong> </span><br>ä»¥ä¸‹ã® Dockerfile ã§ä½œã£ãŸ devcontainer ã§ä½œæ¥­ã—ã¦ã„ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-Dockerfile">FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update &amp;&amp; apt-get install -y \
    build-essential \
    meson \
    ninja-build \
    gcc \
    g++ \
    lcov \
    gcovr \
    git \
    python3-pip \
    python3-setuptools \
    &amp;&amp; apt-get clean
</code></pre> </div><br>ã¨ãã« Mac ã®äººã¯ devcontainer ã§ã‚„ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚ (400æ•—)<br>ä¸å¹¸ãŒè¨ªã‚Œã¾ã™ã€‚<br><br><script>page_contents.push({
    "type":"H2",
    "id":"60",
    "title":"ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"
});
</script>
<h2 id="60">ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h2><br>ã“ã‚“ãªæ„Ÿã˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-plaintext">â¤ tree .
.
â”œâ”€â”€ LICENSE
â””â”€â”€ src
    â”œâ”€â”€ main.cpp
    â”œâ”€â”€ mylib.cpp
    â””â”€â”€ mylib.hpp
</code></pre> </div><br><span class="inline-code"> <code>src/mylib.hpp</code> </span>:<br><div class="code-block"> <pre><code class="language-cpp">#ifndef MYLIB_HPP
#define MYLIB_HPP

int sum(int a, int b, int c);
int try_to_sum(int a, int b, int c);

#endif // MYLIB_HPP
</code></pre> </div><br><span class="inline-code"> <code>src/mylib.cpp</code> </span>:<br><div class="code-block"> <pre><code class="language-cpp">#include &quot;mylib.hpp&quot;

int sum(int a, int b, int c) {
    return a + b + c;
}

int try_to_sum(int a, int b, int c) {
    if (a + b + c &gt; 100) {
        return -1;
    }
    return a + b + c;
}
</code></pre> </div><br><span class="inline-code"> <code>src/main.cpp</code> </span>:<br><div class="code-block"> <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &quot;mylib.hpp&quot;

int main() {
    std::cout &lt;&lt; &quot;Sum: &quot; &lt;&lt; sum(1, 2, 3) &lt;&lt; std::endl;
    return 0;
}
</code></pre> </div><br>3 ã¤ã®æ•°ã®ç·å’Œã‚’å–ã‚‹ (ãŸã ã—ã€å‰ 2 ã¤ã®å’ŒãŒ 100 ã‚’è¶…ãˆã‚‹å ´åˆã¯ -1 ã‚’è¿”ã™) ã§ã™ã€‚<br><script>page_contents.push({
    "type":"H2",
    "id":"84",
    "title":"Meson ã®è¨­å®š"
});
</script>
<h2 id="84">Meson ã®è¨­å®š</h2><br>Meson ã®è¨­å®šã‚’æ›¸ãã¾ã™ã€‚ã€€ã¨ã‚Šã‚ãˆãš <span class="inline-code"> <code>main.cpp</code> </span> ã‚’å®Ÿè¡Œã§ãã‚‹ã¨ã“ã¾ã§è¡Œãã¾ã™ã€‚<br>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ <span class="inline-code"> <code>meson.build</code> </span> ã¨ã„ã†åå‰ã§ä½œã‚Šã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-plaintext">project(&#39;sumsum&#39;, &#39;cpp&#39;,
  version: &#39;0.1.0&#39;,
  default_options: [&#39;cpp_std=c++20&#39;])

src = [&#39;src/main.cpp&#39;, &#39;src/mylib.cpp&#39;]

executable(&#39;sumsum&#39;, src)
</code></pre> </div><br><br>å®Ÿéš›ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã™ã€‚<br><span class="inline-code"> <code>meson setup {dir}</code> </span> ã§ <span class="inline-code"> <code>{dir}</code> </span> ã«ãƒ“ãƒ«ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œã‚‰ã‚Œã¾ã™ã€‚<br>ãã“ã§ <span class="inline-code"> <code>meson compile</code> </span> ã§ãƒ“ãƒ«ãƒ‰ãŒèµ°ã‚Šã¾ã™ã€‚ (å‰ã¾ã§ã¯ <span class="inline-code"> <code>ninja</code> </span> ã‚’ç›´æ¥å©ãã“ã¨ã«ãªã£ã¦ã„ãŸã‚ˆã†ã§ã™ãŒã€ä»Šã¯ <span class="inline-code"> <code>meson compile</code> </span> ã§é©åˆ‡ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’è¦‹ã¤ã‘ã¦ã‚„ã£ã¦ãã‚Œã‚‹ã¿ãŸã„ã§ã™)<br><div class="code-block"> <pre><code class="language-bash">â¤ meson setup builddir &amp;&amp; cd builddir
The Meson build system
Version: 1.5.2
...
Build type: native build
Project name: sumsum
Project version: 0.1.0
C++ compiler for the host machine: c++ (clang 14.0.3 &quot;Apple clang version 14.0.3 (clang-1403.0.22.14.1)&quot;)
C++ linker for the host machine: c++ ld64 857.1
Host machine cpu family: aarch64
Host machine cpu: aarch64
Build targets in project: 1

Found ninja-1.12.1 at /opt/homebrew/bin/ninja
â¤ meson compile

INFO: autodetecting backend as ninja
INFO: calculating backend command to run: /opt/homebrew/bin/ninja
[3/3] Linking target sumsum
</code></pre> </div><br>ã¨ã„ã†ã‚ã‘ã§ãƒ“ãƒ«ãƒ‰ãŒçµ‚ã‚ã‚‹ã¨ã€<br><div class="code-block"> <pre><code class="language-bash">â¤ ./sumsum
Sum: 6
</code></pre> </div><br>ç„¡äº‹ã«å®Ÿè¡Œã•ã‚Œã¾ã—ãŸï¼ã€€ã„ã„ã§ã™ã­ã€œ<br><script>page_contents.push({
    "type":"H2",
    "id":"122",
    "title":"Google Test ã®å°å…¥"
});
</script>
<h2 id="122">Google Test ã®å°å…¥</h2><br>ã¾ãšã¯ <span class="inline-code"> <code>git submodule</code> </span> ã§.... ã‚‚ã—ãã¯ <span class="inline-code"> <code>cmake</code> </span> ã® <span class="inline-code"> <code>fetch_content</code> </span> ã§... ã§ã¯ãªãã€ meson ã«ã¯ãªã‚“ã¨ <span class="inline-code"> <code>wrap</code> </span> ã¨ã„ã†æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚<br><url> <a href="https://mesonbuild.com/Wrapdb-projects.html">https://mesonbuild.com/Wrapdb-projects.html</a> </url><br><span class="inline-code"> <code>meson wrap install {name}</code> </span> ã§å„ç¨®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å–ã£ã¦ãã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>æ—©é€Ÿ Google Test ã‚’å–ã£ã¦ãã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">â¤ mkdir subprojects

â¤ meson wrap install gtest
Installed gtest version 1.15.0 revision 1
</code></pre> </div><br>ã™ã‚‹ã¨ã€<br><span class="inline-code"> <code>subprojects/gtest.wrap</code> </span> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ãã¦ã„ã¦ã€<br><div class="code-block"> <pre><code class="language-ini">[wrap-file]
directory = googletest-1.15.0
source_url = https://github.com/google/googletest/archive/refs/tags/v1.15.0.tar.gz
source_filename = gtest-1.15.0.tar.gz
source_hash = 7315acb6bf10e99f332c8a43f00d5fbb1ee6ca48c52f6b936991b216c586aaad
patch_filename = gtest_1.15.0-1_patch.zip
patch_url = https://wrapdb.mesonbuild.com/v2/gtest_1.15.0-1/get_patch
patch_hash = 5f8e484c48fdc1029c7fd08807bd2615f8c9d16f90df6d81984f4f292752c925
source_fallback_url = https://github.com/mesonbuild/wrapdb/releases/download/gtest_1.15.0-1/gtest-1.15.0.tar.gz
wrapdb_version = 1.15.0-1

[provide]
gtest = gtest_dep
gtest_main = gtest_main_dep
gmock = gmock_dep
gmock_main = gmock_main_dep
</code></pre> </div><br>ã§ã¯ã“ã‚Œã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã™ã€‚<br><span class="inline-code"> <code>tests/test_mylib.cpp</code> </span> ã‚’ä½œã‚Šã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-cpp">#include &lt;gtest/gtest.h&gt;
#include &quot;src/mylib.hpp&quot;

TEST(MyLibTest, SumTest) {
    EXPECT_EQ(sum(1, 2, 3), 6);
}

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&amp;argc, argv);
    return RUN_ALL_TESTS();
}
</code></pre> </div><br><span class="inline-code"> <code>meson.build</code> </span> ã«ãƒ†ã‚¹ãƒˆã®è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-cmake">project(&#39;sumsum&#39;, &#39;cpp&#39;,
  version: &#39;0.1.0&#39;,
  default_options: [&#39;cpp_std=c++20&#39;])

src = [&#39;src/main.cpp&#39;]
lib = [&#39;src/mylib.cpp&#39;]
test_src = [&#39;tests/test_mylib.cpp&#39;]

sumsum_lib = library(&#39;sumsum&#39;, lib,
  include_directories: include_directories(&#39;src&#39;))

executable(&#39;sumsum&#39;, src, link_with: sumsum_lib)

gtest = dependency(&#39;gtest&#39;)

test_exe = executable(&#39;test_sumsum&#39;, test_src,
  include_directories: include_directories(&#39;src&#39;),
  link_with: sumsum_lib,
  dependencies: [gtest]
)

test(&#39;test_sumsum&#39;, test_exe)
</code></pre> </div><br><span class="inline-code"> <code>builddir</code> </span> ã‚’ä¸€æ—¦æ¶ˆã—ã¦å†åº¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã€<br><div class="code-block"> <pre><code class="language-bash">â¤ meson compile
INFO: autodetecting backend as ninja
INFO: calculating backend command to run: /opt/homebrew/bin/ninja
[8/8] Linking target test_sumsum

â¤ ./sumsum
Sum: 6

â¤ meson test
ninja: Entering directory `/Users/yuchi/Desktop/this-is-practice-repository-removed-soon/builddir&#39;
ninja: no work to do.
1/1 test_sumsum        OK              0.22s

Ok:                 1
Expected Fail:      0
Fail:               0
Unexpected Pass:    0
Skipped:            0
Timeout:            0

Full log written to /Users/yuchi/Desktop/this-is-practice-repository-removed-soon/builddir/meson-logs/testlog.txt
</code></pre> </div><br>ã„ã„ã§ã™ã­<br><script>page_contents.push({
    "type":"H2",
    "id":"170",
    "title":"Google Benchmark ã®å°å…¥"
});
</script>
<h2 id="170">Google Benchmark ã®å°å…¥</h2><br>Google Benchmark ã‚‚åŒæ§˜ã« <span class="inline-code"> <code>meson wrap install</code> </span> ã§å–ã£ã¦ãã¾ã™ã€‚ã‚ã‚ŠãŒãŸã„...*<br><div class="code-block"> <pre><code class="language-bash">â¤ meson wrap install google-benchmark
</code></pre> </div><br><span class="inline-code"> <code>tests/benchmark_mylib.cpp</code> </span> ã‚’ä½œã‚Šã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-cpp">#include &lt;benchmark/benchmark.h&gt;
#include &quot;src/mylib.hpp&quot;

static void BM_Sum(benchmark::State&amp; state) {
    for (auto _ : state) {
        sum(1, 2, 3);
    }
}

BENCHMARK(BM_Sum);

BENCHMARK_MAIN();
</code></pre> </div><br><br><span class="inline-code"> <code>meson.build</code> </span> ã«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-diff">â¤ git diff meson.build
diff --git a/meson.build b/meson.build
index c231b3a..5788c5c 100644
--- a/meson.build
+++ b/meson.build
@@ -5,6 +5,7 @@ project(&#39;sumsum&#39;, &#39;cpp&#39;,
 src = [&#39;src/main.cpp&#39;]
 lib = [&#39;src/mylib.cpp&#39;]
 test_src = [&#39;tests/test_mylib.cpp&#39;]
+bench_src = [&#39;tests/benchmark_mylib.cpp&#39;]

 sumsum_lib = library(&#39;sumsum&#39;, lib,
   include_directories: include_directories(&#39;src&#39;))
@@ -20,3 +21,14 @@ test_exe = executable(&#39;test_sumsum&#39;, test_src,
 )

 test(&#39;test_sumsum&#39;, test_exe)
+
+gbenchmark = dependency(&#39;benchmark&#39;)
+
+benchmark_exe = executable(&#39;benchmark_sumsum&#39;, bench_src,
+  include_directories: include_directories(&#39;src&#39;),
+  link_with: sumsum_lib,
+  dependencies: [gbenchmark]
+)
+
+
</code></pre> </div><br><br>ãƒ“ãƒ«ãƒ‰ã—ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€<br><div class="code-block"> <pre><code class="language-bash">â¤ ./benchmark_sumsum
Unable to determine clock rate from sysctl: hw.cpufrequency: No such file or directory
This does not affect benchmark measurements, only the metadata output.
***WARNING*** Failed to set thread affinity. Estimated CPU frequency may be incorrect.
2024-09-27T16:44:58+09:00
Running ./benchmark_sumsum
Run on (8 X 24 MHz CPU s)
CPU Caches:
  L1 Data 64 KiB
  L1 Instruction 128 KiB
  L2 Unified 4096 KiB (x8)
Load Average: 6.87, 5.16, 4.16
-----------------------------------------------------
Benchmark           Time             CPU   Iterations
-----------------------------------------------------
BM_Sum           2.64 ns         2.64 ns    259362043
</code></pre> </div><br>ç„¡äº‹ã«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãŒå–ã‚Œã¾ã—ãŸï¼<br><br><script>page_contents.push({
    "type":"H2",
    "id":"198",
    "title":"ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬"
});
</script>
<h2 id="198">ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬</h2><br>æœ€å¾Œã«ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨ˆæ¸¬ã‚’ã—ã¾ã™ã€‚<br>ãªã‚“ã¨ Meson ã¯ Meson ã®ãƒ¬ãƒ™ãƒ«ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã¾ã™ã€‚<br>é †ç•ªã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚<br>ã¾ãšã¯ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ç”¨ã®ãƒ“ãƒ«ãƒ‰ã‚’ä½œã‚Šã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">â¤ meson setup builddir_cov --buildtype=debugoptimized -Db_coverage=true

â¤ meson compile -C builddir_cov
</code></pre> </div><br>ã™ã‚‹ã¨ã€ä¾‹ãˆã° <br><div class="code-block"> <pre><code class="language-bash">â¤ tree builddir_cov/libsumsum.dylib.p/
builddir_cov/libsumsum.dylib.p/
â”œâ”€â”€ libsumsum.dylib.symbols
â”œâ”€â”€ src_mylib.cpp.gcno
â””â”€â”€ src_mylib.cpp.o
</code></pre> </div><br>ã®ã‚ˆã†ã«ã€ <span class="inline-code"> <code>.gcno</code> </span> ãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ãã¦ã„ã¾ã™ã€‚ <br>ã§ã¯ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">â¤ ./test_sumsum
</code></pre> </div><br>ã™ã‚‹ã¨ã€ä¾‹ãˆã°<br><div class="code-block"> <pre><code class="language-bash">â¤ tree builddir_cov/libsumsum.dylib.p/
builddir_cov/libsumsum.dylib.p/
â”œâ”€â”€ libsumsum.dylib.symbols
â”œâ”€â”€ src_mylib.cpp.gcda
â”œâ”€â”€ src_mylib.cpp.gcno
â””â”€â”€ src_mylib.cpp.o
</code></pre> </div><br>ã¨ã€ <span class="inline-code"> <code>.gcda</code> </span> ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡äº‹ã«ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ãã†ã—ãŸã‚‰ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">â¤ ninja -C builddir_cov coverage-html
</code></pre> </div><br>ã™ã‚‹ã¨ã€ <span class="inline-code"> <code>meson-logs/coveragereport/index.html</code> </span> ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚<br>ã“ã‚Œã‚’é–‹ãã¨...<br><figure><img src="cpp_ci/image.png" ><figcaption></figcaption></figure><br>ç„¡äº‹ã«ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸï¼ã€€(Â´ãƒ»Ï‰ãƒ»ï½€)ğŸ‰<br><script>page_contents.push({
    "type":"H2",
    "id":"245",
    "title":"GitHub Actions ã§ CI ã™ã‚‹"
});
</script>
<h2 id="245">GitHub Actions ã§ CI ã™ã‚‹</h2><br>æœ€å¾Œã«ã€ã“ã‚Œã‚’ GitHub Actions ã§ç¶™ç¶šçš„ã«è¡Œã†ã‚ˆã†ã«ã—ã¾ã™ã€‚<br>(ã“ã“ã‹ã‚‰å‡ºã¦ãã‚‹ Action ã¯ <span class="inline-code"> <code>on</code> </span> ãªã©ã¯é©å½“ãªã®ã§é©å®œå¿…è¦ãªã‚‚ã®ã«å¤‰ãˆã¦ãã ã•ã„)<br><script>page_contents.push({
    "type":"H3",
    "id":"254",
    "title":"ãƒ†ã‚¹ãƒˆ"
});
</script>
<h3 id="254">ãƒ†ã‚¹ãƒˆ</h3><br>ã¾ãšã¯ãƒ†ã‚¹ãƒˆã‚’èµ°ã‚‰ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚<br>ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã¾ã¨ã‚ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">mkdir subprojects
meson wrap install gtest
meson wrap install google-benchmark
</code></pre> </div><br>ã‚ã¨ã¯é©å½“ãª Action ã‚’æ›¸ãã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-yaml">name: Test

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Set up Meson
      run: sudo apt-get install -y meson ninja-build

    - name: Install dependencies
      run: bash install.sh
    
    - name: Build
      run: meson setup builddir &amp;&amp; meson compile -C builddir

    - name: Test
      run: cd builddir &amp;&amp; ./test_sumsum
</code></pre> </div><br>ã™ã‚‹ã¨ã€<br><figure><img src="cpp_ci/image-1.png" ><figcaption></figcaption></figure><br>ã“ã‚Œã§ PRæ™‚ã«ã¯ãƒ†ã‚¹ãƒˆãŒèµ°ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚<br><script>page_contents.push({
    "type":"H3",
    "id":"273",
    "title":"ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯"
});
</script>
<h3 id="273">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h3><br>ç¶šã„ã¦ã¹ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’èµ°ã‚‰ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚<br><url> <a href="https://github.com/benchmark-action/github-action-benchmark">https://github.com/benchmark-action/github-action-benchmark</a> </url><br>ã¨ã„ã†ç´ æ™´ã‚‰ã—ã„ã€€Action ãŒã‚ã‚‹ã®ã§ã“ã‚Œã‚’ä½¿ã„ã¾ã™ã€‚<br>ã“ã® Action ã‚’ä½¿ã†ã¨ã€<br><ul><li>ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®çµæœã‚’ã‚³ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ãã‚Œã‚‹</li><li>ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®æ¨ç§»ã‚’è¨˜éŒ²ã—ã¦ GitHub Pages ã«è¡¨ç¤ºã—ã¦ãã‚Œã‚‹</li></ul><br>ãªã©ãŒã§ãã¾ã™ã€‚<br>README.md ã«ã—ãŸãŒã£ã¦ã€ã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§ä½¿ãˆã‚‹ã‚ˆã†ã«çµæœã‚’åãã€ä»¥ä¸‹ã®ã‚ˆã†ãª Action ã‚’æ›¸ãã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-yaml">name: Benchmark

on: [push, pull_request]

jobs:
  benchmark:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Set up Meson
      run: sudo apt-get install -y meson ninja-build

    - name: Install dependencies
      run: bash install.sh
    
    - name: Build
      run: meson setup builddir &amp;&amp; meson compile -C builddir 

    - name: Run benchmark
      run: cd builddir &amp;&amp; ./benchmark_sumsum --benchmark_format=json | tee benchmark_result.json

    - name: Store benchmark result
      uses: benchmark-action/github-action-benchmark@v1
      with:
        tool: &#39;googlecpp&#39;
        output-file-path: builddir/benchmark_result.json
        github-token: ${{ secrets.GITHUB_TOKEN }}
        comment-on-alert: true
        summary-always: true
        fail-on-alert: true
        auto-push: true
        comment-always: true
</code></pre> </div><br>ã™ã‚‹ã¨ã€<br><figure><img src="cpp_ci/image-6.png" ><figcaption></figcaption></figure><br>ã“ã‚“ãªæ„Ÿã˜ã§ã€å„ã‚³ãƒŸãƒƒãƒˆã«å¯¾ã—ã¦ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®çµæœã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚<br>ã•ã‚‰ã«ã€ä¾‹ãˆã° <span class="inline-code"> <code>mylib.hpp</code> </span> ã‚’<br><div class="code-block"> <pre><code class="language-cpp">#include &quot;mylib.hpp&quot;
#include &lt;unistd.h&gt;

int sum(int a, int b, int c) {
    return a + b + c;
}

int try_to_sum(int a, int b, int c) {
    usleep(1 * 1000 * 1000);
    if (a + b + c &gt; 100) {
        return -1;
    }
    return a + b + c;
}
</code></pre> </div><br>ã“ã‚“ãªæ„Ÿã˜ã«ã—ã¦ 1ç§’ã® <span class="inline-code"> <code>sleep</code> </span> ã‚’å…¥ã‚Œã¦ã‚‚ã®ã™ã”ããƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è½ã¨ã™ã‚ˆã†ã«ã—ã¦ã¿ã‚‹ã¨ã€<br><figure><img src="cpp_ci/image-7.png" ><figcaption></figcaption></figure><br>ã“ã‚“ãªæ„Ÿã˜ã§è­¦å‘Šã‚’å‡ºã—ã¦ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ä¾¿åˆ©ï¼<br><br>ã•ã‚‰ã«ã€ <span class="inline-code"> <code>gh-pages</code> </span> ãƒ–ãƒ©ãƒ³ãƒã‚’ç”Ÿã‚„ã—ã¦ã„ã¦ã€ GitHub Pages ã‚’ gh-pages èµ·ç‚¹ã§ä½œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãŠãã¨ã€<br><figure><img src="cpp_ci/image-5.png" ><figcaption></figcaption></figure><br>ã“ã‚“ãªæ„Ÿã˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æ¨ç§»ã®ãƒšãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ä¾¿åˆ©ã€‚<br><script>page_contents.push({
    "type":"H3",
    "id":"326",
    "title":"ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬"
});
</script>
<h3 id="326">ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬</h3><br>æœ€å¾Œã«ã€ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ã‚’ Codecov ã§è¡Œã†ã‚ˆã†ã«ã—ã¾ã™ã€‚<br>ã¨ã„ã£ã¦ã‚‚æœ¬å½“ã«è¨ˆæ¸¬ã™ã‚‹éƒ¨åˆ†ã¯ã‚‚ã†ã§ãã¦ã„ã‚‹ã®ã§ã€ã‚ã¨ã¯ãã‚Œã‚’ XML å½¢å¼ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ Codecov ã«æ¸¡ã™ã ã‘ã§ã™ã€‚<br><url> <a href="https://app.codecov.io/">https://app.codecov.io/</a> </url> ã«ã„ã£ã¦ã€€Key ã‚’ã‚‚ã‚‰ã„ã€ Secrets ã«ç™»éŒ²ã—ã¦ãŠãã¾ã™ã€‚<br>ãã—ã¦ Action ã‚’æ›¸ãã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-yaml">name: Codecov

on: [push, pull_request]

jobs:
  upload:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Set up Meson
      run: sudo apt-get install -y meson ninja-build

    - name: Install dependencies
      run: bash install.sh
    
    - name: Build
      run: meson setup builddir_cov --buildtype=debugoptimized -Db_coverage=true &amp;&amp; meson compile -C builddir_cov

    - name: Test
      run: cd builddir_cov &amp;&amp; ./test_sumsum

    - name: Export XML
      run: cd builddir_cov &amp;&amp; ninja coverage-xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v4
      with:
        token: ${{ secrets.CODECOV_TOKEN }}
        files: builddir_cov/meson-logs/coverage.xml
</code></pre> </div><br>ã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬çµæœãŒè¦‹ã‚‰ã‚Œã¾ã™ã€€(Â´ãƒ»Ï‰ãƒ»ï½€)ğŸ‰<br><figure><img src="cpp_ci/image-8.png" ><figcaption></figcaption></figure><br><span class="inline-code"> <code>a + b + c &gt; 100</code> </span> ãªã©ãŒãƒ†ã‚¹ãƒˆã§ãã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã­ã€‚<br>ã¾ãŸã€æ–°ãŸã« PR ã‚’å‡ºã™ã¨<br><br><figure><img src="cpp_ci/image-9.png" ><figcaption></figcaption></figure><br>ã‚«ãƒãƒ¬ãƒƒã‚¸ã®å¤‰åŒ–ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚ä¾¿åˆ©ã€‚<br><script>page_contents.push({
    "type":"H2",
    "id":"354",
    "title":"ã¾ã¨ã‚"
});
</script>
<h2 id="354">ã¾ã¨ã‚</h2><br>ã‹ãªã‚Šã‚‚ã†ã“ã‚Šã”ã‚Šã¨ã„ã†æ°—æŒã¡ã§ã™ã€‚<br>ä»¤å’Œã®ä¸–ã®ä¸­ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¯ã‚‚ã¯ã‚„ãã®ã‚‚ã®ã§ã¯ãªãã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã€ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®æ”¯æ´ etc... ã«ã‚ˆã£ã¦å·®ãŒã¤ãã€ã¿ãŸã„ãªè¨€è«–ãŒç››ã‚“ã«ãªã£ã¦ã„ã¾ã™ãŒã€ãã‚Œã‚’ã²ã—ã²ã—ã¨æ„Ÿã˜ã‚‹ä½œæ¥­ã§ã—ãŸã€‚<br>(å®Ÿã¯æœ€åˆã« CMake ã§ã‚„ã‚ã†ã¨ã—ã¦é…·ã„ç›®ã«ã‚ã„ã€ Meson ã«é€ƒã’ãŸã¯ã„ã„ã‚‚ã®ã®ã‚«ãƒãƒ¬ãƒƒã‚¸å‘¨ã‚Šã§ Clang ã¨ GCC ã®ç«¶åˆã«è‹¦ã—ã‚€ãªã©ã€ã‹ãªã‚Šè¾›ã‹ã£ãŸã§ã™ã€‚ ä¾‹ãˆã°ã¡ã‚ƒã‚“ã¨ <span class="inline-code"> <code>CXX=g++</code> </span> ã—ã¦ã‚‚ <span class="inline-code"> <code>gcov</code> </span> ã¯ Clang ç”¨ã®ã‚‚ã®ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä½¿ã‚ã‚Œã¦ã„ã¦... ãªã©ã®ãƒ‘ãƒƒã¨ã‚ã‹ã‚‰ãªã„ä¾å­˜ãŒãŸãã•ã‚“ã‚ã‚Šã€å¤§å¤‰ãªã“ã¨ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚)<br>ã¨ã¯ã„ãˆã€ Meson ã¯çµæ§‹ã„ã„ã‚‚ã®ã‚’çŸ¥ã£ãŸãªã¨ã„ã†æ°—æŒã¡ã§ã™ã€‚ã“ã‚Œã§è‰²ã€…ã¨é–‹ç™ºã‚’ä¾¿åˆ©ã«ã—ã¦ã„ããŸã„ã€‚<br><script>page_contents.push({
    "type":"H2",
    "id":"369",
    "title":"ä»Šæ—¥ã«ä¸€æ›²"
});
</script>
<h2 id="369">ä»Šæ—¥ã«ä¸€æ›²</h2><br>ãµãŸã‚Š Meson<br><iframe width="560" height="315" src="https://www.youtube.com/embed/mNpPQXMgtmw?si=7LylWAN0ZufbLSC7" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br><div class="footnote"><span class="footnote-def" id="label_1"><a href="#ref_1">[1]</a> <url> <a href="https://logmi.jp/tech/articles/330373">ã€Œè‡ªåˆ†ã®æœªæ¥äºˆæ¸¬ã‚’ä¿¡ã˜ã¦ã¡ã‚‡ã£ã¨æ„åœ°ã‚’å¼µã£ã¦ã¿ã‚‹ã€ ã¾ã¤ã‚‚ã¨ã‚†ãã²ã‚æ°ãŒRubyã«å‹å®£è¨€ã‚’å…¥ã‚Œãªã„ç†ç”±</a> </url> ã‚ˆã‚Š.</span></div>

            <hr>

            <script src="https://utteranc.es/client.js" repo="abap34/abap34com-comment" issue-term="og:title"
                label="comment" theme="github-light" crossorigin="anonymous" async>
                </script>

        </div>

        <div class="side">
            <div class="side-sticky">
                <div class="sidebar">
                    <ul id="toc"></ul>
                </div>

                <div class="links">


                    <div class="to-links">
                        <a href="https://abap34.com/posts.html"> <i class="fas fa-book-open" id="toposts"></i> è¨˜äº‹ä¸€è¦§ </a>

                        <br>


                        <a href="https://abap34.com"> <i class="fas fa-home" id="tohome"></i> ãƒ›ãƒ¼ãƒ  </a>

                        <br>
                        <br>
                        <br>

                        <a href="https://www.abap34.com/rss.xml"> <i class="fas fa-rss" id="torss"></i> RSS </a>
                    </div>
                    <br>
                    <br>

                    <p><i class="icon fab fa-twitter" id="twitter"></i><a href="https://twitter.com/abap34"
                            class="tolink"> @abap34</a>
                    </p>
                    <p><i class="icon fab fa-github" id="github"></i><a href="https://github.com/abap34"
                            class="tolink"> @abap34</a></p>
                    <p><i class="icon fas fa-envelope" id="mail"></i><a href="mailto:abap0002@gmail.com" class="tolink">
                            abap0002@gmail.com</a>
                    </p>



                    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button"
                        data-show-count="false" data-via="abap34">Tweet</a>
                    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


                    <footer>
                        <p>&copy; abap34 </p>
                    </footer>

                </div>
            </div>



        </div>

    </div>

    <script>
        const tocContainer = document.querySelector("#toc");
        const tocTitle = document.createElement("div");
        tocTitle.innerHTML = title;
        tocTitle.classList.add("toc_title");
        tocContainer.appendChild(tocTitle);



        page_contents.forEach(item => {
            if (item.type == "H1" || item.type === "H2" || item.type === "H3") {
                const listItem = document.createElement("li");
                listItem.innerHTML = `<a href="#${item.id}">${item.title}</a>`;
                listItem.classList.add("toc_" + item.type);
                tocContainer.appendChild(listItem);
            }
        });

        const options = {
            root: null,
            rootMargin: "-50% 0px",
            threshold: 0
        };

        const observer = new IntersectionObserver(onIntersection, options);

        page_contents.forEach(item => {
            const element = document.getElementById(item.id);
            if (element) {
                observer.observe(element);
            }
        });

        // page_contensts ã®å…ˆé ­ã‚’ active ã«ã—ã¦ãŠã
        const first_item = document.querySelector(`#toc a[href="#${page_contents[0].id}"]`);
        first_item.classList.add("active");

        prev_item = first_item;

        function onIntersection(entries) {
            entries.forEach(entry => {
                const id = entry.target.id;
                const tocItem = document.querySelector(`#toc a[href="#${id}"]`);
                if (tocItem) {
                    if (entry.isIntersecting) {
                        tocItem.classList.add("active");
                        prev_item.classList.remove("active");
                        prev_item = tocItem;
                    }
                }
            });
        }



        tag = document.querySelector(".tag-placeholder").innerHTML;
        document.querySelector(".tag-placeholder").innerHTML = "";

        tag = tag.replace("[", "").replace("]", "").split(", ").map(tag => tag.trim());

        tag.forEach(tag => {
            const each_tag = document.createElement("span");
            each_tag.classList.add("tag");
            each_tag.innerHTML = "<a href='https://abap34.com/posts.html?tags=" + tag + "'> # " + tag + "</a>";
            document.querySelector(".tag-placeholder").appendChild(each_tag);
        });
    </script>




</body>


</html>
