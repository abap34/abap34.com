<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
<meta charset="UTF-8">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-10Y7GMS7GV"></script>
    <script>
        if (location.hostname !== "localhost") {
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-10Y7GMS7GV');
        }
    </script>
    
    <title>C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹</title>

    <!-- OGP / Twitter ç”¨ã®ãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta property="og:title" content="C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹">
    <meta property="og:image" content="https://abap34.com/posts/cpp_ci/image-7.png">
    <meta property="og:description" content="C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® CI ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã™ã€‚ Meson ã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰ã€ GitHub Actions + (Google Test, Google Benchmark) ã«ã‚ˆã‚‹ç¶™ç¶šçš„ãƒ†ã‚¹ãƒˆã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã€ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ã‚’è¡Œã„ã¾ã™ã€‚">
    <meta property="og:url" content="https://abap34.com/posts/cpp_ci.html">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="abap34's blog">
    <meta property="og:locale" content="ja_JP">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@abap34" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- ãƒã‚¤ãƒ©ã‚¤ãƒˆJS / FontAwesome -->
    <link rel="stylesheet" id="highlight-theme"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/styles/a11y-light.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/julia.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/julia-repl.min.js"></script>
    <script src="https://unpkg.com/highlightjs-lean/dist/lean.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/scheme.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/dockerfile.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- ãã®ä»–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ext-language_tools.js"></script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <!-- CSS -->
    <style>*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html,
body {
    width: 100%;
    min-height: 100vh;
    /* ç”»é¢å…¨ä½“ã«èƒŒæ™¯ãŒä¼¸ã³ã‚‹ã‚ˆã†ã«ã™ã‚‹ */
    background-color: #fff;
    color: #333;
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    line-height: 1.5;
    /* æ–‡å­—ã¡ã‚‡ã£ã¨ */
    /*  global-header ã®ã¶ã‚“ã‚’æŠ¼ã—ä¸‹ã’ã‚‹ */
    /* padding-top: 3.0rem; */
    /* â†‘ global-headerå´ä¸‹ã’ãŸ */

    /* é•·ã„å˜èªã‚‚å¼·åˆ¶çš„ã«æ”¹è¡Œ */
    word-wrap: break-word;
}

/* å¥èª­ç‚¹ã ã‘ã¯æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ã† */
@font-face {
    font-family: "Noto Serif JP";
    src: local("Noto Serif JP"),
        url("https://fonts.gstatic.com/ea/notoserifjp/v6/NotoSerifJP-Regular.woff2") format("woff2"),
        url("https://fonts.gstatic.com/ea/notoserifjp/v6/NotoSerifJP-Regular.woff") format("woff");
    font-weight: 200;
    font-style: normal;
    unicode-range: U+3000-303F, U+3040-309F, U+30A0-30FF, U+FF00-FFEF, U+4E00-9FAF, U+3400-4DBF;
}

/* ===============================================
      Layout
      =============================================== */

/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨è¦ç´ ã‚’éè¡¨ç¤º */
.mobile-sidebar,
.mobile-related-articles {
    display: none;
}

/* ãƒ¢ãƒã‚¤ãƒ«ç”¨ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
.mobile-sidebar {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
}

.article-body {
    display: flex;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
    gap: 2rem;
}

.side {
    width: 240px;
    flex-shrink: 0;
}

.side-sticky {
    position: sticky;
    top: 3.5rem;
}

.sidebar {
    padding: 0.5rem;
    max-height: 80vh;
    overflow-y: auto;
}

.content {
    flex: 1;
    padding: 0.5rem;
    min-width: 0;
    /* å†…å®¹ãŒã‚ãµã‚Œã«ãã„ã‚ˆã†ã« */
}

/* å³ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
.right-sidebar {
    width: 340px;
    flex-shrink: 0;
    padding: 0.5rem;
}

.right-sidebar-sticky {
    position: sticky;
    top: 3.5rem;
    max-height: calc(100vh - 4rem);
    overflow-y: auto;
}

/* ===============================================
      Header
      =============================================== */
/* ä¸€ç•ªä¸Šã«å¸¸ã«å›ºå®šã™ã‚‹ãƒ˜ãƒƒãƒ€ */
.global-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 999;
    background: #ffffffbb;
    border-bottom: 1px solid #ddd;
    padding: 0.5rem 1rem;

    /* è¦ç´ ã¯æ¨ªã«ä¸¦ã¹ã‚‹ */
    display: flex;
    justify-content: space-between;
    align-items: center;

    /* blur */
    backdrop-filter: blur(10px);

}

.article-header {
    padding: 1rem;
    /* margin-bottom: 1rem; */
    padding-top: 6rem;
    max-width: 800px;
    margin: 0 auto;
}

.title {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.date {
    font-size: 0.9rem;
    color: #777;
    margin-bottom: 0.5rem;
}

.tag-placeholder {
    margin-top: 0.5rem;
}

.tag {
    display: inline-block;
    margin-right: 0.4rem;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    background-color: #eee;
    font-size: 0.8rem;
    color: #333;
}

.tag:hover {
    background-color: #ddd;
}

.tag a {
    color: inherit;
    text-decoration: none;
}

/* ===============================================
      TOC
      =============================================== */
.toc_title {
    display: none;
}

#toc {
    list-style: none;
    padding-left: 0;
    font-size: 0.9rem;
    color: #555;
    line-height: 1.4;
}

#toc li {
    margin: 0.4rem 0;
}

#toc a {
    text-decoration: none;
    color: #555;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    transition: background-color 0.1s, opacity 0.1s;
    opacity: 1;
}

#toc a:hover {
    background-color: #f0f0f0;
    opacity: 1;
}

#toc a.active {
    background-color: #777;
    color: #fff;
    opacity: 1 !important;
}

/* éšå±¤ã«ã‚ˆã‚‹ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ */
.toc_H1 {
    margin-left: 0;
}

.toc_H2 {
    margin-left: 1rem;
}

.toc_H3 {
    padding-left: 1.5rem;
}

/* ===============================================
      Content
      =============================================== */

/* è¦‹å‡ºã—ã®è¦‹ãŸç›®ã‚’å°‘ã—æ”¹å–„ã—ã€ä¸‹ç·šã¨ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¿½åŠ  */
.content h1,
.content h2,
.content h3,
.content h4,
.content h5,
.content h6 {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    font-weight: bold;
    margin-top: 2rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid #ccc;
    padding-bottom: 0.3rem;
    color: #333;
}

h5 {
    font-size: 1.1rem;
}

.content p {
    margin-bottom: 1rem;
}

/* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’æœ¬æ–‡ã¨åŒºåˆ¥ã—ã‚„ã™ã */
.content .inline-code {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    background-color: #f6f8fa;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 0rem 0rem;
    margin: 0 0rem;
    font-size: 0.95em;
    overflow-wrap: break-word;
    word-break: break-all;
    white-space: pre-wrap;
    max-width: 100%;
}

/* ç®‡æ¡æ›¸ãã®å­—ä¸‹ã’ */
.content ul,
.content ol,
.content dl {
    margin-left: 2.5rem !important;
    margin-top: 0.5rem !important;
    margin-bottom: 0rem !important;
}

/* ç”»åƒã‚„å‹•ç”»ã®ã¯ã¿å‡ºã—å¯¾ç­– (ç‰¹ã«ç¸¦é•·ç”»åƒ) */
.content img,
.content video {
    max-width: 80%;
    max-height: 80vh;
    /* ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã®80%ã‚’ä¸Šé™ã« */
    height: auto;
    display: block;
    border: 1px solid #ddd;
    /* çœŸã‚“ä¸­ã«ç½®ã */
    margin: 1rem auto;
}


/* ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ã‚¶ã‚¤ãƒ³ (ã‚·ãƒ³ãƒ—ãƒ«ï¼†è¦‹ã‚„ã™ã„) */
table {
    width: 100%;
    border-collapse: collapse;
    /* ä½™åˆ†ãªéš™é–“ã‚’é™¤å» */
    margin: 1rem 0;
    font-size: 0.95rem;
    line-height: 1.4;
    margin: 1rem;
}

table thead th {
    background-color: #f6f8fa;
    border-bottom: 2px solid #ccc;
    padding: 0.6rem 0.8rem;
    text-align: left;
    font-weight: bold;
}

table th,
table td {
    border: 1px solid #ddd;
    padding: 0.5rem 0.8rem;
    vertical-align: top;
}

table tbody tr:nth-child(even) {
    background-color: #f9f9f9;
    /* å¶æ•°è¡Œã«è–„ã„èƒŒæ™¯ */
}

table tbody tr:hover {
    background-color: #f0f0f0;
    /* ãƒ›ãƒãƒ¼æ™‚ã®å¼·èª¿ */
}

content a {
    word-break: break-all;
    color: #80bdff;
    text-decoration: none;
}

iframe {
    width: 100%;
}

figure {
    margin: 1rem 0;
}

figcaption {
    color: #777;
    /* çœŸã‚“ä¸­ã«ç½®ã */
    display: block;
    margin-top: 0.5rem;
    text-align: center;
}


strong {
    /* ã¡ã‚‡ã£ã¨å¼·ã‚ã« */
    font-weight: 1000;
}

/* ===============================================
      Footer
      =============================================== */
footer {
    margin-top: 2rem;
    text-align: center;
    font-size: 0.8rem;
    color: #666;
}

/* ===============================================
      Responsive
      =============================================== */
@media (max-width: 768px) {
    .article-body {
        flex-direction: column;
        padding: 0 1rem;
    }

    .side {
        width: 100%;
        margin-bottom: 1.5rem;
        /* height: 100vh; ã‚’å‰Šé™¤ã€autoã« */
        height: auto;
    }

    .content {
        width: 100%;
    }
}

/* ===============================================
      Note / Warn / Danger blocks
      =============================================== */
.info {
    background-color: #f0f0f0;
    padding: 1rem;
    border-left: 5px solid #80bdff;
    margin: 1rem;

}

/* Warn: ã¡ã‚‡ã£ã¨å¼·ã‚ã®æ³¨æ„å–šèµ· (ã‚ªãƒ¬ãƒ³ã‚¸ç³») */
.warn {
    background-color: #fff3e0;
    /* è–„ã„ã‚ªãƒ¬ãƒ³ã‚¸ */
    padding: 1rem;
    border-left: 5px solid #ffa500;
    /* ã‚ªãƒ¬ãƒ³ã‚¸ */
    margin: 1rem;
}

/* Danger: é‡å¤§ãªè­¦å‘Š (èµ¤ç³») */
.danger {
    background-color: #ffe7e7;
    /* è–„ã„èµ¤ */
    padding: 1rem;
    border-left: 5px solid #ff4d4f;
    /* èµ¤ */
    margin: 1rem;
}

/* ===============================================
      Math Blocks (theorem / lemma / corollary / etc.)
      =============================================== */

/* Theorem / Lemma / Corollary / Proposition / Definition / Proof ãã‚Œãã‚Œã«å…±é€šã™ã‚‹ãƒ™ãƒ¼ã‚¹ */
/* ãƒ™ãƒ¼ã‚¹: èƒŒæ™¯ã¯é€æ˜ã€å·¦ã«å¤ªç·šã®ã¿ */
.theorem,
.lemma,
.corollary,
.proposition,
.definition,
.proof {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding: 1rem;
    background: none;
    border: 1px solid #ddd;
    /* è¡Œé–“ã¡ã‚‡ã£ã¨ã ã‘åºƒã */
    line-height: 2.0;
}

/* Theorem */
.theorem {
    counter-increment: theorem;
}

.theorem::before {
    content: "Theorem " counter(theorem) " ";
    font-weight: bold;
    color: #333;
}

/* Lemma */
.lemma {
    counter-increment: lemma;
}

.lemma::before {
    content: "Lemma " counter(lemma) " ";
    font-weight: bold;
    color: #333;
}

/* Corollary */
.corollary {
    counter-increment: corollary
}

.corollary::before {
    content: "Corollary " counter(corollary) " ";
    font-weight: bold;
    color: #333;
}

/* Proposition */
.proposition {
    counter-increment: proposition;
}

.proposition::before {
    content: "Proposition " counter(proposition) " ";
    font-weight: bold;
    color: #333;
}

/* Definition */
.definition {
    counter-increment: definition;
}

.definition::before {
    content: "Definition " counter(definition) " ";
    font-weight: bold;
    color: #333;
}

/* Proof */
.proof {
    counter-increment: proof;
}

.proof::before {
    content: "Proof ";
    font-weight: bold;
    color: #333;
}

/* æœ€å¾Œã®æ®µè½ãŒä½™è¨ˆãªä¸‹ä½™ç™½ã‚’å–ã‚‰ãªã„ãŸã‚ã®èª¿æ•´ */
.theorem p:last-child,
.lemma p:last-child,
.corollary p:last-child,
.proposition p:last-child,
.definition p:last-child,
.proof p:last-child {
    margin-bottom: 0;
}

.math-block {
    overflow-x: auto;
    overflow-y: hidden;
    font-size: 0.85em;
}

.math-inline {
    display: inline-grid;
    overflow: hidden !important;
    font-size: 0.85em;
    max-width: 100%;
}

/* ===============================================
      Footnotes
        =============================================== */

/* è„šæ³¨ãƒªãƒ³ã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ« */


.footnote-ref {
    font-size: 0.8em;
    vertical-align: super;
    color: #777;
}

.footnote-ref a {
    color: #777;
    text-decoration: none;
}

.footnote-ref a:hover {
    text-decoration: underline;
}

/* è„šæ³¨æœ¬ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.footnotes {
    margin-top: 1rem;
    padding: 1rem;
    border: 1px solid #ddd;
    font-size: 0.9em;
}

.footnote-def {
    margin-bottom: 0.5rem;
    /* æ”¹è¡Œ */
    padding: 0.2rem 0.5rem;
    border-left: 3px solid #ddd;
    display: block;
}

.footnote-def p {
    margin-bottom: 0;
}


.responsive-card {
    border: 1px solid #ccc;
    padding: 5px;
    display: flex;
    flex-direction: row;
    align-items: center;
    max-width: 600px;
    margin: 10px auto;
    word-break: break-all;
}

.responsive-card img {
    width: 90%;
    max-width: 300px;
    border: none;
    margin: 0;
    max-height: 200px;
    object-fit: cover;
}

.responsive-card .text-container {
    margin: 0 10px;
}

@media (max-width: 600px) {
    .responsive-card {
        flex-direction: column;
        text-align: center;
    }

    .responsive-card .text-container {
        margin: 10px 0 0 0;
    }

    .responsive-card img {
        width: 100%;
        max-width: 100%;
    }
}


/* ========================== */
/* ã“ã“ã‹ã‚‰ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
/* ========================== */
/* â–¼ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ (ãƒ¦ãƒ¼ã‚¶ãŒæ‰‹å‹•ã§ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ãŸå ´åˆ) */
body.dark-mode {
    background-color: #1f2022 !important;
    color: #e0e0e0 !important;
}

body.side.dark-mode {
    background-color: #1f2022 !important;
}

body.dark-mode .article-body {
    background-color: #1f2022 !important;
    color: #e0e0e0 !important;
}


body.dark-mode .global-header {
    background-color: #1f20229a !important;
    border-bottom: 1px solid #444 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .article-header {
    color: #e0e0e0 !important;
}

body.dark-mode .content {
    color: #e0e0e0 !important;
}

body.dark-mode .content h1,
body.dark-mode .content h2,
body.dark-mode .content h3,
body.dark-mode .content h4,
body.dark-mode .content h5,
body.dark-mode .content h6 {
    color: #e0e0e0 !important;
    border-bottom: 1px solid #555 !important;
}

body.dark-mode .content .inline-code {
    background-color: #2d2d2d !important;
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}


body.dark-mode .content a {
    color: #8ab4f8 !important;
}

body.dark-mode table thead th {
    background-color: #333 !important;
    border-bottom: 2px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode table th,
body.dark-mode table td {
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode table tbody tr:nth-child(even) {
    background-color: #1e1e1e !important;
}

body.dark-mode table tbody tr:hover {
    background-color: #2a2a2a !important;
}

body.dark-mode .tag {
    background-color: #333 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .tag:hover {
    background-color: #444 !important;
}

body.dark-mode #toc {
    color: #bbb !important;
}

body.dark-mode #toc a {
    color: #bbb !important;
}

body.dark-mode #toc a.active {
    background-color: #555 !important;
    color: #fff !important;
}

body.dark-mode footer {
    color: #aaa !important;
}


body.dark-mode .info {
    background-color: #2a2a2a !important;
    border-left: 5px solid #80bdff !important;
    color: #e0e0e0 !important;
}

body.dark-mode .warn {
    background-color: #3a2a1a !important;
    border-left: 5px solid #ffb74d !important;
    color: #e0e0e0 !important;
}

body.dark-mode .danger {
    background-color: #4a1a1a !important;
    border-left: 5px solid #ff4d4f !important;
    color: #e0e0e0 !important;
}

body.dark-mode .theorem,
body.dark-mode .lemma,
body.dark-mode .corollary,
body.dark-mode .proposition,
body.dark-mode .definition,
body.dark-mode .proof {
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .footnotes {
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .footnote-def {
    border-left: 3px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode a {
    color: #8ab4f8 !important;
}

body.dark-mode a:hover {
    color: #8ab4f8 !important;
}

body.dark-mode .timeline {
    background-color: #2a2b2f !important;
    border: 1px solid #444 !important;
    color: #e0e0e0 !important;
}


body.dark-mode .theorem::before,
body.dark-mode .lemma::before,
body.dark-mode .corollary::before,
body.dark-mode .proposition::before,
body.dark-mode .definition::before,
body.dark-mode .proof::before {
    color: #e0e0e0 !important;
}

body.dark-mode button {
    background-color: #333 !important;
    color: #e0e0e0 !important;
    /* è£…é£¾ãªã— */
    border: none;
    /* ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼æ™‚ã®ã‚«ãƒ¼ã‚½ãƒ« */
    cursor: pointer;
}


/* â–¼ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰å¼·åˆ¶ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ (ãƒ¦ãƒ¼ã‚¶ãŒæ˜ç¤ºçš„ã«ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ãŸå ´åˆ) */
body.light-mode {
    background-color: #fff !important;
    color: #333 !important;
}

body.light-mode .global-header {
    background-color: #fff !important;
    border-bottom: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .article-header {
    background-color: #fff !important;
    color: #333 !important;
}

body.light-mode .content {
    background-color: #fff !important;
    color: #333 !important;
}

body.light-mode .content h1,
body.light-mode .content h2,
body.light-mode .content h3,
body.light-mode .content h4,
body.light-mode .content h5,
body.light-mode .content h6 {
    color: #333 !important;
    border-bottom: 1px solid #ccc !important;
}

body.light-mode .content .inline-code {
    background-color: #f6f8fa !important;
    border: 1px solid #ddd !important;
    color: #333 !important;
}

pre code.hljs {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    display: block;
    overflow-x: auto;
    padding: 0em !important;
    /* background ã¯é€æ˜ã« */
    background: none !important;
}

/* ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ç­‰å¹…ãƒ•ã‚©ãƒ³ãƒˆã‚’ç¢ºå®Ÿã«é©ç”¨ */
pre, code {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    font-size: 13px;
    line-height: 1.5;
}

body.light-mode .content a {
    color: #80bdff !important;
}

body.light-mode table thead th {
    background-color: #f6f8fa !important;
    border-bottom: 2px solid #ccc !important;
    color: #333 !important;
}

body.light-mode table th,
body.light-mode table td {
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode table tbody tr:nth-child(even) {
    background-color: #f9f9f9 !important;
}

body.light-mode table tbody tr:hover {
    background-color: #f0f0f0 !important;
}

body.light-mode .tag {
    background-color: #eee !important;
    color: #333 !important;
}

body.light-mode .tag:hover {
    background-color: #ddd !important;
}

body.light-mode #toc {
    color: #555 !important;
}

body.light-mode #toc a {
    color: #555 !important;
}

body.light-mode #toc a.active {
    background-color: #777 !important;
    color: #fff !important;
}

body.light-mode footer {
    color: #666 !important;
}

/* è–„é’ */
body.light-mode .info {
    background-color: #f0f0f0 !important;
    border-left: 5px solid #80bdff !important;
    color: #333 !important;
}

body.light-mode .warn {
    background-color: #fff3e0 !important;
    border-left: 5px solid #ffa500 !important;
    color: #333 !important;
}

body.light-mode .danger {
    background-color: #ffe7e7 !important;
    border-left: 5px solid #ff4d4f !important;
    color: #333 !important;
}

body.light-mode .theorem,
body.light-mode .lemma,
body.light-mode .corollary,
body.light-mode .proposition,
body.light-mode .definition,
body.light-mode .proof {
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .footnotes {
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .footnote-def {
    border-left: 3px solid #ddd !important;
    color: #333 !important;
}

body.light-mode a {
    color: #80bdff !important;
}

body.light-mode a:hover {
    color: #80bdff !important;
}

body.light-mode .timeline-comment {
    background-color: #fff !important;
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .timeline-comment .timeline-comment-header {
    background-color: #fff !important;
    border-bottom: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .theorem::before,
body.light-mode .lemma::before,
body.light-mode .corollary::before,
body.light-mode .proposition::before,
body.light-mode .definition::before,
body.light-mode .proof::before {
    color: #333 !important;
}


body.light-mode button {
    background-color: #fff !important;
    color: #333 !important;
    /* ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼æ™‚ã®è‰² */
    border: 1px solid #ddd !important;
    /* ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼æ™‚ã®ã‚«ãƒ¼ã‚½ãƒ« */
    cursor: pointer;
}

/* ===============================================
   OGPãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰
   =============================================== */
.link-card {
    margin: 16px 0;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    max-width: 600px;
}

.link-card:hover {
    border-color: #80bdff;
}

.link-card-container {
    display: flex;
    text-decoration: none;
    color: inherit;
    height: 140px;
}

.link-card-image {
    flex: 0 0 220px;
    max-width: 100%;
    background: #f5f5f5;
    position: relative;
    overflow: hidden;
}

.link-card-image img {
    max-width: 100%;
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center top;
    display: block;
    background: #f5f5f5;
}

.link-card-content {
    flex: 1;
    padding: 12px 16px;
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.link-card-header {
    display: none;
}

.link-card-favicon {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
}

.link-card-domain {
    font-size: 10px;
    color: #777;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.link-card-title {
    font-size: 14px;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: #333;
    line-height: 1.3;
    flex-shrink: 0;
}

.link-card-content h3 {
    margin: 0;
    font-size: 13px;
    font-weight: 600;
    line-height: 1.2;
}

.link-card-description {
    font-size: 11px;
    color: #777;
    margin: 0 0 auto 0;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex-grow: 1;
}

.link-card-footer {
    position: relative;
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    flex-shrink: 0;
}

.link-card-url {
    font-size: 9px;
    color: #999;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

.link-card-date {
    font-size: 9px;
    color: #999;
    white-space: nowrap;
}

@media (max-width: 600px) {
    .link-card-container {
        flex-direction: column;
        height: auto;
    }
    
    .link-card-image {
        flex: none;
        height: 160px;
        width: 100%;
    }
    
    .link-card-content {
        padding: 16px;
    }
}

/* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ */
body.dark-mode .link-card {
    border-color: #555;
    background-color: #222;
}

body.dark-mode .link-card:hover {
    border-color: #80bdff;
}

body.dark-mode .link-card-domain {
    color: #aaa;
}

body.dark-mode .link-card-title {
    color: #ddd;
}

body.dark-mode .link-card-description {
    color: #aaa;
}

body.dark-mode .link-card-url,
body.dark-mode .link-card-date {
    color: #777;
}

/* ===============================================
   è¨˜äº‹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
   =============================================== */
.article-navigation {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    display: flex;
    justify-content: space-between;
    margin: 2rem 0;
    gap: 1rem;
}

.nav-item {
    flex: 1;
    max-width: 45%;
}

.nav-item:empty {
    visibility: hidden;
}

.nav-item a {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s ease;
    min-height: 80px;
    justify-content: space-between;
}

.nav-item a:hover {
    border-color: #80bdff;
    background-color: #f8f9fa;
}

.nav-direction {
    font-size: 0.875rem;
    color: #666;
    margin-bottom: 0.5rem;
}

.nav-title {
    font-weight: 600;
    line-height: 1.4;
}

.nav-next {
    text-align: right;
}

/* ===============================================
   é–¢é€£è¨˜äº‹
   =============================================== */
.related-articles {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 4px;
}

.related-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #333;
    border-bottom: 1px solid #ddd;
    padding-bottom: 0.5rem;
}

.related-item {
    margin-bottom: 0.75rem;
    padding: 0.75rem;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    background-color: #fff;
    transition: all 0.2s ease;
}

.related-item:hover {
    border-color: #80bdff;
    background-color: #f8f9fa;
}

.related-item:last-child {
    margin-bottom: 0;
}

.related-item a {
    display: block;
    text-decoration: none;
    color: inherit;
}

.related-item-title {
    font-weight: 600;
    font-size: 0.875rem;
    line-height: 1.4;
    margin-bottom: 0.5rem;
    color: #333;
}

.related-date {
    font-size: 0.75rem;
    color: #666;
    margin-bottom: 0.5rem;
}

.related-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
}

.related-tag {
    font-size: 0.7rem;
    background-color: #e5e7eb;
    color: #374151;
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
}

.related-similarity {
    font-size: 0.7rem;
    color: #666;
    margin-top: 0.25rem;
    font-style: italic;
}

.similarity-source {
    color: #999;
    font-size: 0.65rem;
    font-weight: normal;
}

/* ===============================================
   ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
   =============================================== */
body.dark-mode .article-navigation {
    border-color: #555;
}

body.dark-mode .nav-item a {
    border-color: #555;
    background-color: #222;
    color: #ddd;
}

body.dark-mode .nav-item a:hover {
    border-color: #80bdff;
    background-color: #333;
}

body.dark-mode .nav-direction {
    color: #999;
}

body.dark-mode .related-articles {
    border-color: #555;
    background-color: #222;
}

body.dark-mode .related-title {
    color: #ddd;
    border-color: #555;
}

body.dark-mode .related-item {
    border-color: #555;
    background-color: #333;
}

body.dark-mode .related-item:hover {
    border-color: #80bdff;
    background-color: #444;
}

body.dark-mode .related-item-title {
    color: #ddd;
}

body.dark-mode .related-date {
    color: #999;
}

body.dark-mode .related-tag {
    background-color: #555;
    color: #ddd;
}

body.dark-mode .similarity-source {
    color: #777;
}


/* ===============================================
   ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
   =============================================== */
@media (max-width: 1200px) {
    .right-sidebar {
        width: 240px;
    }
}

@media (max-width: 1024px) {
    .right-sidebar {
        display: none;
    }

    .article-body {
        gap: 1rem;
    }
}

@media (max-width: 768px) {
    .article-navigation {
        flex-direction: column;
    }

    .nav-item {
        max-width: 100%;
    }

    /* ãƒ¢ãƒã‚¤ãƒ«ã§ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¯éè¡¨ç¤ºï¼ˆå¾Œã§è¨˜äº‹å†…ã«ç§»å‹•ï¼‰ */
    .side {
        display: none;
    }

    .article-body {
        flex-direction: column;
        gap: 0.5rem;
    }

    .content {
        padding: 0.25rem;
    }

    /* ãƒ¢ãƒã‚¤ãƒ«ç”¨ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆè¨˜äº‹è¦‹å‡ºã—ä¸‹ã«è¡¨ç¤ºï¼‰ */
    .mobile-sidebar {
        display: block;
        width: 100%;
        margin: 1rem 0;
    }

    /* ãƒ¢ãƒã‚¤ãƒ«ç”¨ã®é–¢é€£è¨˜äº‹ï¼ˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ä¸‹ã«è¡¨ç¤ºï¼‰ */
    .mobile-related-articles {
        display: block;
        width: 100%;
        margin-top: 2rem;
    }

    /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã®é–¢é€£è¨˜äº‹ã‚’ãƒ¢ãƒã‚¤ãƒ«ã§ã¯éè¡¨ç¤º */
    .content .related-articles {
        display: none;
    }

    /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®é †åºèª¿æ•´ */
    .article-navigation {
        order: 5;
    }
}</style>

    <!-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç½®æ›ç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆå¤‰æ•°ç­‰ -->
    <script>
        page_contents = [];
    </script>

    <!-- Runner is not required. Skip this. -->
</head>

<body>
    <header class="global-header">
        <div class="header-inner">
            <!-- ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ sidebar ã‚’è¡¨ç¤º/éè¡¨ç¤º -->
            <a href="https://abap34.com" class="header-logo">abap34.com</a>
            > <a href="https://abap34.com/blog">/blog</a> > <a href="https://abap34.com/posts/cpp_ci.html">/C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹</a>
        </div>

        <!-- ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã¨ãƒ„ã‚¤ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ– -->
        <div class="header-controls" style="display: flex;">
            <!-- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ -->
            <button id="theme-toggle" aria-label="Toggle Dark Mode">ğŸŒ™</button>
            <!-- ãƒ„ã‚¤ãƒ¼ãƒˆãƒœã‚¿ãƒ³ -->
            <div class="tweet-button">
                <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button"
                    data-text="C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹" data-url="https://abap34.com/posts/cpp_ci.html" data-via="@abap34"> Tweet </a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>
        </div>
    </header>


    <div class="article-header">
        <div class="title">C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã„æ„Ÿã˜ã® ãƒ†ã‚¹ãƒˆãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹</div>
        <script>title = document.querySelector(".title").innerHTML;</script>
        <br>
        <div class="date">2024/09/23</div>
        <br>
        <div class="tag-placeholder">[C++, CI, GitHub Actions, Google Test, Google Benchmark, Meson]</div>
    </div>

    <!-- ãƒ¢ãƒã‚¤ãƒ«ç”¨ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆè¨˜äº‹è¦‹å‡ºã—ä¸‹ã«è¡¨ç¤ºï¼‰ -->
    <div class="mobile-sidebar">
<div class="sidebar">
<ul id="mobile-toc-list"></ul>
</div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const desktopToc = document.querySelector("#toc");
  const mobileToc = document.querySelector("#mobile-toc-list");
  if (desktopToc && mobileToc) {
    mobileToc.innerHTML = desktopToc.innerHTML;
  }
});
</script>

    <!-- 3) ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ¬ä½“ (ã‚µã‚¤ãƒ‰ãƒãƒ¼ + ãƒ¡ã‚¤ãƒ³æœ¬æ–‡ + å³ã‚µã‚¤ãƒ‰ãƒãƒ¼) -->
    <div class="article-body">

        <!-- å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ (TOC) -->
        <div class="side">
            <div class="side-sticky">
                <div class="sidebar">
                    <ul id="toc"></ul>
                </div>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³æœ¬æ–‡ -->
        <div class="content">
            <br><script>page_contents.push({
    "type":"H2",
    "id":"2",
    "title":"ã§ãã‚‹ã‚‚ã®"
});
</script>
<h2 id="2">ã§ãã‚‹ã‚‚ã®</h2><br><figure><img src="cpp_ci/image-10.png" ><figcaption>ãƒ†ã‚¹ãƒˆ</figcaption></figure> <figure><img src="cpp_ci/image-11.png" ><figcaption>ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</figcaption></figure> <figure><img src="cpp_ci/image.png" ><figcaption>ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬</figcaption></figure> <figure><img src="cpp_ci/image-7.png" ><figcaption>è‡ªå‹•ãƒ™ãƒ³ãƒãƒ»Peformance Alert</figcaption></figure> <figure><img src="cpp_ci/image-5.png" ><figcaption>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æ¨ç§»ã‚’è¨˜éŒ²</figcaption></figure> <figure><img src="cpp_ci/image-9.png" ><figcaption>CodeCovã§ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’è¦‹ã‚‹</figcaption></figure><br><br><script>page_contents.push({
    "type":"H2",
    "id":"18",
    "title":"ã¯ã˜ã‚ã«"
});
</script>
<h2 id="18">ã¯ã˜ã‚ã«</h2><br><blockquote>äººé¡ã¯ã¾ã ãƒ†ã‚¹ãƒˆã‚’ä¸è¦ã¨ã™ã‚‹æŠ€è¡“ã‚’é–‹ç™ºã—ã¦ã„ãªã„ã®ã§ã€ãƒ†ã‚¹ãƒˆã¯ã„ã‚‹ã‚“ã§ã™ã­. <span class="footnote-ref"><sup id="ref_1"><a href="#label_1">[1]</a></sup></span> </blockquote><br><br>ã¨ã„ã†ã‚ã‘ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã™ã€‚ GitHub ã§ C++ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚„ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã€<br><ul><li>Google Test ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ã</li><li>Google Benchmark ã§ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚‹</li><li>ãã‚Œã®çµæœã®æ¨ç§»ã®çµ±è¨ˆã‚’ GitHub Pages ã§ã„ã„æ„Ÿã˜ã«è¡¨ç¤ºã™ã‚‹</li><li>Codecov ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’è¨ˆæ¸¬ã™ã‚‹</li></ul><br>ã‚ãŸã‚Šã‚’æ•´å‚™ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã™ã€‚<br><br>ä»Šå›ã¯ Meson ã¨ã„ã†ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚<br>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å…ˆé ­ã«ã¯ã“ã‚“ãªæ„Ÿã˜ã®ã“ã¨ãŒæ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚<br><br><blockquote>Meson is an open source build system meant to be both extremely fast, and, even more importantly, as user friendly as possible. The main design point of Meson is that every moment a developer spends writing or debugging build definitions is a second wasted. So is every second spent waiting for the build system to actually start compiling code.</blockquote><br><br>user friendry, ã„ã„ã“ã¨ã°ã§ã™ã­ (ã»ã‚“ã¨ã«)<br><br>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ã„ã¡ãŠã†ã‚ã‚Šã¾ã™.ã€€<url> <a href="https://mesonbuild.com/index.html">https://mesonbuild.com/index.html</a> </url><br>æ­£ç›´ã‚ã¾ã‚Šç¶²ç¾…çš„ã«ã¯æ›¸ã„ã¦ãã‚Œã¦ã„ãªã„å°è±¡ã§ã™ãŒ... ğŸ˜¢ <br><br>ä»¥ä¸‹ã® Dockerfile ã§ä½œã£ãŸ devcontainer ã§ä½œæ¥­ã—ã¦ã„ã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-Dockerfile">FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update &amp;&amp; apt-get install -y \
    build-essential \
    meson \
    ninja-build \
    gcc \
    g++ \
    lcov \
    gcovr \
    git \
    python3-pip \
    python3-setuptools \
    &amp;&amp; apt-get clean
</code></pre> </div><br>ã¨ãã« Mac ã®äººã¯ devcontainer ã§ã‚„ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚ (400æ•—)<br><br><script>page_contents.push({
    "type":"H2",
    "id":"74",
    "title":"ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ç’°å¢ƒæ§‹ç¯‰"
});
</script>
<h2 id="74">ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ç’°å¢ƒæ§‹ç¯‰</h2><br><script>page_contents.push({
    "type":"H3",
    "id":"77",
    "title":"ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"
});
</script>
<h3 id="77">ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h3><br>ã“ã‚“ãªæ„Ÿã˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-plaintext">â¤ tree .
.
â”œâ”€â”€ LICENSE
â””â”€â”€ src
    â”œâ”€â”€ main.cpp
    â”œâ”€â”€ mylib.cpp
    â””â”€â”€ mylib.hpp
</code></pre> </div><br><span class="inline-code"> <code>src/mylib.hpp</code> </span>:<br><div class="code-block"> <pre><code class="language-cpp">#ifndef MYLIB_HPP
#define MYLIB_HPP

int sum(int a, int b, int c);
int try_to_sum(int a, int b, int c);

#endif // MYLIB_HPP
</code></pre> </div><br><span class="inline-code"> <code>src/mylib.cpp</code> </span>:<br><div class="code-block"> <pre><code class="language-cpp">#include &quot;mylib.hpp&quot;

int sum(int a, int b, int c) {
    return a + b + c;
}

int try_to_sum(int a, int b, int c) {
    if (a + b + c &gt; 100) {
        return -1;
    }
    return a + b + c;
}
</code></pre> </div><br><span class="inline-code"> <code>src/main.cpp</code> </span>:<br><div class="code-block"> <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &quot;mylib.hpp&quot;

int main() {
    std::cout &lt;&lt; &quot;Sum: &quot; &lt;&lt; try_to_sum(1, 2, 3) &lt;&lt; std::endl;
    return 0;
}
</code></pre> </div><br>3 ã¤ã®æ•°ã®ç·å’Œã‚’å–ã‚‹ (ãŸã ã—ã€å‰ 2 ã¤ã®å’ŒãŒ 100 ã‚’è¶…ãˆã‚‹å ´åˆã¯ -1 ã‚’è¿”ã™) ã§ã™ã€‚<br><script>page_contents.push({
    "type":"H3",
    "id":"102",
    "title":"Meson ã®è¨­å®š"
});
</script>
<h3 id="102">Meson ã®è¨­å®š</h3><br>Meson ã®è¨­å®šã‚’æ›¸ãã¾ã™ã€‚ã€€ã¨ã‚Šã‚ãˆãš <span class="inline-code"> <code>main.cpp</code> </span> ã‚’å®Ÿè¡Œã§ãã‚‹ã¨ã“ã¾ã§è¡Œãã¾ã™ã€‚<br>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ <span class="inline-code"> <code>meson.build</code> </span> ã¨ã„ã†åå‰ã§ä½œã‚Šã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-plaintext">project(&#39;sumsum&#39;, &#39;cpp&#39;,
  version: &#39;0.1.0&#39;,
  default_options: [&#39;cpp_std=c++20&#39;])

src = [&#39;src/main.cpp&#39;, &#39;src/mylib.cpp&#39;]

executable(&#39;sumsum&#39;, src)
</code></pre> </div><br><br>å®Ÿéš›ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã™ã€‚<br><br><span class="inline-code"> <code>meson setup {dir}</code> </span> ã§ <span class="inline-code"> <code>{dir}</code> </span> ã«ãƒ“ãƒ«ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œã‚‰ã‚Œã¾ã™ã€‚<br><br>ãã“ã§ <span class="inline-code"> <code>meson compile</code> </span> ã§ãƒ“ãƒ«ãƒ‰ãŒèµ°ã‚Šã¾ã™ã€‚ (å‰ã¾ã§ã¯ <span class="inline-code"> <code>ninja</code> </span> ã‚’ç›´æ¥å©ãã“ã¨ã«ãªã£ã¦ã„ãŸã‚ˆã†ã§ã™ãŒã€ä»Šã¯ <span class="inline-code"> <code>meson compile</code> </span> ã§é©åˆ‡ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’è¦‹ã¤ã‘ã¦ã‚„ã£ã¦ãã‚Œã‚‹ã¿ãŸã„ã§ã™)<br><br><div class="code-block"> <pre><code class="language-bash">â¤ meson setup builddir &amp;&amp; cd builddir
The Meson build system
Version: 1.5.2
...
Build type: native build
Project name: sumsum
Project version: 0.1.0
C++ compiler for the host machine: c++ (clang 14.0.3 &quot;Apple clang version 14.0.3 (clang-1403.0.22.14.1)&quot;)
C++ linker for the host machine: c++ ld64 857.1
Host machine cpu family: aarch64
Host machine cpu: aarch64
Build targets in project: 1

Found ninja-1.12.1 at /opt/homebrew/bin/ninja
â¤ meson compile

INFO: autodetecting backend as ninja
INFO: calculating backend command to run: /opt/homebrew/bin/ninja
[3/3] Linking target sumsum
</code></pre> </div><br>ã¨ã„ã†ã‚ã‘ã§ãƒ“ãƒ«ãƒ‰ãŒçµ‚ã‚ã‚‹ã¨ã€<br><div class="code-block"> <pre><code class="language-bash">â¤ ./sumsum
Sum: 6
</code></pre> </div><br>ç„¡äº‹ã«å®Ÿè¡Œã•ã‚Œã¾ã—ãŸï¼ã€€<br><script>page_contents.push({
    "type":"H3",
    "id":"143",
    "title":"Google Test ã®å°å…¥"
});
</script>
<h3 id="143">Google Test ã®å°å…¥</h3><br>ã¾ãšã¯ <span class="inline-code"> <code>git submodule</code> </span> ã§.... ã‚‚ã—ãã¯ <span class="inline-code"> <code>cmake</code> </span> ã® <span class="inline-code"> <code>fetch_content</code> </span> ã§... ã§ã¯ãªãã€ ãªã‚“ã¨ Meson ã¯ wrapdb ã¨ã„ã†ã¨ã“ã‚ã«ã„ã‚ã‚“ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç½®ã„ã¦ãã‚Œã¦ã„ã¦ç°¡å˜ã«ã¨ã£ã¦ãã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><br><url> <a href="https://mesonbuild.com/Wrapdb-projects.html">https://mesonbuild.com/Wrapdb-projects.html</a> </url><br><br><span class="inline-code"> <code>meson wrap install {name}</code> </span> ã§å–ã‚Œã¾ã™ã€‚<br>æ—©é€Ÿ Google Test ã‚’å–ã£ã¦ãã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-bash">â¤ mkdir subprojects

â¤ meson wrap install gtest
Installed gtest version 1.15.0 revision 1
</code></pre> </div><br>ã™ã‚‹ã¨ã€ <span class="inline-code"> <code>subprojects/gtest.wrap</code> </span> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ãã¦ã„ã¦ã€<br><div class="code-block"> <pre><code class="language-ini">[wrap-file]
directory = googletest-1.15.0
source_url = https://github.com/google/googletest/archive/refs/tags/v1.15.0.tar.gz
source_filename = gtest-1.15.0.tar.gz
source_hash = 7315acb6bf10e99f332c8a43f00d5fbb1ee6ca48c52f6b936991b216c586aaad
patch_filename = gtest_1.15.0-1_patch.zip
patch_url = https://wrapdb.mesonbuild.com/v2/gtest_1.15.0-1/get_patch
patch_hash = 5f8e484c48fdc1029c7fd08807bd2615f8c9d16f90df6d81984f4f292752c925
source_fallback_url = https://github.com/mesonbuild/wrapdb/releases/download/gtest_1.15.0-1/gtest-1.15.0.tar.gz
wrapdb_version = 1.15.0-1

[provide]
gtest = gtest_dep
gtest_main = gtest_main_dep
gmock = gmock_dep
gmock_main = gmock_main_dep
</code></pre> </div><br>ã§ã¯ã“ã‚Œã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã™ã€‚<br><br><span class="inline-code"> <code>tests/test_mylib.cpp</code> </span> ã‚’ä½œã‚Šã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-cpp">#include &lt;gtest/gtest.h&gt;
#include &quot;src/mylib.hpp&quot;

TEST(MyLibTest, SumTest) {
    EXPECT_EQ(sum(1, 2, 3), 6);
}

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&amp;argc, argv);
    return RUN_ALL_TESTS();
}
</code></pre> </div><br><span class="inline-code"> <code>meson.build</code> </span> ã«ãƒ†ã‚¹ãƒˆã®è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-cmake">project(&#39;sumsum&#39;, &#39;cpp&#39;,
  version: &#39;0.1.0&#39;,
  default_options: [&#39;cpp_std=c++20&#39;])

src = [&#39;src/main.cpp&#39;]
lib = [&#39;src/mylib.cpp&#39;]
test_src = [&#39;tests/test_mylib.cpp&#39;]

sumsum_lib = library(&#39;sumsum&#39;, lib,
  include_directories: include_directories(&#39;src&#39;))

executable(&#39;sumsum&#39;, src, link_with: sumsum_lib)

gtest = dependency(&#39;gtest&#39;)

test_exe = executable(&#39;test_sumsum&#39;, test_src,
  include_directories: include_directories(&#39;src&#39;),
  link_with: sumsum_lib,
  dependencies: [gtest]
)

test(&#39;test_sumsum&#39;, test_exe)
</code></pre> </div><br><span class="inline-code"> <code>builddir</code> </span> ã‚’ä¸€æ—¦æ¶ˆã—ã¦å†åº¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã€<br><div class="code-block"> <pre><code class="language-bash">â¤ meson compile
INFO: autodetecting backend as ninja
INFO: calculating backend command to run: /opt/homebrew/bin/ninja
[8/8] Linking target test_sumsum

â¤ ./sumsum
Sum: 6

â¤ meson test
ninja: Entering directory `/Users/yuchi/Desktop/this-is-practice-repository-removed-soon/builddir&#39;
ninja: no work to do.
1/1 test_sumsum        OK              0.22s

Ok:                 1
Expected Fail:      0
Fail:               0
Unexpected Pass:    0
Skipped:            0
Timeout:            0

Full log written to /Users/yuchi/Desktop/this-is-practice-repository-removed-soon/builddir/meson-logs/testlog.txt
</code></pre> </div><br>ãƒ¨ã‚·!<br><script>page_contents.push({
    "type":"H3",
    "id":"192",
    "title":"Google Benchmark ã®å°å…¥"
});
</script>
<h3 id="192">Google Benchmark ã®å°å…¥</h3><br>Google Benchmark ã‚‚åŒæ§˜ã« <span class="inline-code"> <code>meson wrap install</code> </span> ã§å–ã£ã¦ãã¾ã™ã€‚ã‚ã‚ŠãŒãŸã„...<br><br><div class="code-block"> <pre><code class="language-bash">â¤ meson wrap install google-benchmark
</code></pre> </div><br><span class="inline-code"> <code>tests/benchmark_mylib.cpp</code> </span> ã‚’ä½œã‚Šã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-cpp">#include &lt;benchmark/benchmark.h&gt;
#include &quot;src/mylib.hpp&quot;

static void BM_Sum(benchmark::State&amp; state) {
    for (auto _ : state) {
        sum(1, 2, 3);
    }
}

BENCHMARK(BM_Sum);

BENCHMARK_MAIN();
</code></pre> </div><br><span class="inline-code"> <code>meson.build</code> </span> ã«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-diff">â¤ git diff meson.build
diff --git a/meson.build b/meson.build
index c231b3a..5788c5c 100644
--- a/meson.build
+++ b/meson.build
@@ -5,6 +5,7 @@ project(&#39;sumsum&#39;, &#39;cpp&#39;,
 src = [&#39;src/main.cpp&#39;]
 lib = [&#39;src/mylib.cpp&#39;]
 test_src = [&#39;tests/test_mylib.cpp&#39;]
+bench_src = [&#39;tests/benchmark_mylib.cpp&#39;]

 sumsum_lib = library(&#39;sumsum&#39;, lib,
   include_directories: include_directories(&#39;src&#39;))
@@ -20,3 +21,14 @@ test_exe = executable(&#39;test_sumsum&#39;, test_src,
 )

 test(&#39;test_sumsum&#39;, test_exe)
+
+gbenchmark = dependency(&#39;benchmark&#39;)
+
+benchmark_exe = executable(&#39;benchmark_sumsum&#39;, bench_src,
+  include_directories: include_directories(&#39;src&#39;),
+  link_with: sumsum_lib,
+  dependencies: [gbenchmark]
+)
+
+
</code></pre> </div><br>ãƒ“ãƒ«ãƒ‰ã—ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€<br><br><div class="code-block"> <pre><code class="language-bash">â¤ ./benchmark_sumsum
Unable to determine clock rate from sysctl: hw.cpufrequency: No such file or directory
This does not affect benchmark measurements, only the metadata output.
***WARNING*** Failed to set thread affinity. Estimated CPU frequency may be incorrect.
2024-09-27T16:44:58+09:00
Running ./benchmark_sumsum
Run on (8 X 24 MHz CPU s)
CPU Caches:
  L1 Data 64 KiB
  L1 Instruction 128 KiB
  L2 Unified 4096 KiB (x8)
Load Average: 6.87, 5.16, 4.16
-----------------------------------------------------
Benchmark           Time             CPU   Iterations
-----------------------------------------------------
BM_Sum           2.64 ns         2.64 ns    259362043
</code></pre> </div><br>ç„¡äº‹ã«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãŒå–ã‚Œã¾ã—ãŸï¼<br><script>page_contents.push({
    "type":"H3",
    "id":"219",
    "title":"ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬"
});
</script>
<h3 id="219">ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬</h3><br>æœ€å¾Œã«ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨ˆæ¸¬ã‚’ã—ã¾ã™ã€‚<br><br>ãªã‚“ã¨ Meson ã¯ Meson ã®ãƒ¬ãƒ™ãƒ«ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã¾ã™ã€‚<br>é †ç•ªã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚<br>ã¾ãšã¯ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ç”¨ã®ãƒ“ãƒ«ãƒ‰ã‚’ä½œã‚Šã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">â¤ meson setup builddir_cov --buildtype=debugoptimized -Db_coverage=true

â¤ meson compile -C builddir_cov
</code></pre> </div><br>ã™ã‚‹ã¨ã€ä¾‹ãˆã° <br><div class="code-block"> <pre><code class="language-bash">â¤ tree builddir_cov/libsumsum.dylib.p/
builddir_cov/libsumsum.dylib.p/
â”œâ”€â”€ libsumsum.dylib.symbols
â”œâ”€â”€ src_mylib.cpp.gcno
â””â”€â”€ src_mylib.cpp.o
</code></pre> </div><br>ã®ã‚ˆã†ã«ã€ <span class="inline-code"> <code>.gcno</code> </span> ãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ãã¦ã„ã¾ã™ã€‚ <br><br>ã§ã¯ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">â¤ ./test_sumsum
</code></pre> </div><br>ã™ã‚‹ã¨ã€ä¾‹ãˆã°<br><div class="code-block"> <pre><code class="language-bash">â¤ tree builddir_cov/libsumsum.dylib.p/
builddir_cov/libsumsum.dylib.p/
â”œâ”€â”€ libsumsum.dylib.symbols
â”œâ”€â”€ src_mylib.cpp.gcda
â”œâ”€â”€ src_mylib.cpp.gcno
â””â”€â”€ src_mylib.cpp.o
</code></pre> </div><br>ã¨ã€ <span class="inline-code"> <code>.gcda</code> </span> ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡äº‹ã«ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚<br><br>ãã†ã—ãŸã‚‰ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">â¤ ninja -C builddir_cov coverage-html
</code></pre> </div><br>ã™ã‚‹ã¨ã€ <span class="inline-code"> <code>meson-logs/coveragereport/index.html</code> </span> ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚<br>ã“ã‚Œã‚’é–‹ãã¨...<br><figure><img src="cpp_ci/image.png" ><figcaption></figcaption></figure><br>ç„¡äº‹ã«ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸï¼ã€€(Â´ãƒ»Ï‰ãƒ»ï½€)ğŸ‰<br><script>page_contents.push({
    "type":"H2",
    "id":"269",
    "title":"GitHub Actions ã§ CI ã™ã‚‹"
});
</script>
<h2 id="269">GitHub Actions ã§ CI ã™ã‚‹</h2><br>æœ€å¾Œã«ã€ã“ã‚Œã‚’ GitHub Actions ã§ç¶™ç¶šçš„ã«è¡Œã†ã‚ˆã†ã«ã—ã¾ã™ã€‚<br>(ã“ã“ã‹ã‚‰å‡ºã¦ãã‚‹ Action ã¯ <span class="inline-code"> <code>on</code> </span> ãªã©ã¯é©å½“ãªã®ã§é©å®œå¿…è¦ãªã‚‚ã®ã«å¤‰ãˆã¦ãã ã•ã„)<br><script>page_contents.push({
    "type":"H3",
    "id":"278",
    "title":"ãƒ†ã‚¹ãƒˆ"
});
</script>
<h3 id="278">ãƒ†ã‚¹ãƒˆ</h3><br>ã¾ãšã¯ãƒ†ã‚¹ãƒˆã‚’èµ°ã‚‰ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚<br>ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã¾ã¨ã‚ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-bash">mkdir subprojects
meson wrap install gtest
meson wrap install google-benchmark
</code></pre> </div><br>ã‚ã¨ã¯é©å½“ãª Action ã‚’æ›¸ãã¾ã™ã€‚<br><div class="code-block"> <pre><code class="language-yaml">name: Test

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Set up Meson
      run: sudo apt-get install -y meson ninja-build

    - name: Install dependencies
      run: bash install.sh
    
    - name: Build
      run: meson setup builddir &amp;&amp; meson compile -C builddir

    - name: Test
      run: cd builddir &amp;&amp; ./test_sumsum
</code></pre> </div><br>ã™ã‚‹ã¨ã€<br><figure><img src="cpp_ci/image-1.png" ><figcaption></figcaption></figure><br>ã“ã‚Œã§ PRæ™‚ã«ã¯ãƒ†ã‚¹ãƒˆãŒèµ°ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚<br><script>page_contents.push({
    "type":"H3",
    "id":"297",
    "title":"ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯"
});
</script>
<h3 id="297">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h3><br>ç¶šã„ã¦ã¹ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’èµ°ã‚‰ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚<br><url> <a href="https://github.com/benchmark-action/github-action-benchmark">https://github.com/benchmark-action/github-action-benchmark</a> </url><br>ã¨ã„ã†ç´ æ™´ã‚‰ã—ã„ã€€Action ãŒã‚ã‚‹ã®ã§ã“ã‚Œã‚’ä½¿ã„ã¾ã™ã€‚<br>ã“ã® Action ã‚’ä½¿ã†ã¨ã€<br><ul><li>ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®çµæœã‚’ã‚³ãƒ¡ãƒ³ãƒˆã«æ›¸ã</li><li>ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®æ¨ç§»ã‚’è¨˜éŒ²ã—ã¦ GitHub Pages ã«è¡¨ç¤º</li></ul><br>ãªã©ãŒã§ãã¾ã™ã€‚<br><br>README.md ã«ã—ãŸãŒã£ã¦ã€ã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§ä½¿ãˆã‚‹ã‚ˆã†ã«çµæœã‚’åãã€ä»¥ä¸‹ã®ã‚ˆã†ãª Action ã‚’æ›¸ãã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-yaml">name: Benchmark

on: [push, pull_request]

jobs:
  benchmark:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Set up Meson
      run: sudo apt-get install -y meson ninja-build

    - name: Install dependencies
      run: bash install.sh
    
    - name: Build
      run: meson setup builddir &amp;&amp; meson compile -C builddir 

    - name: Run benchmark
      run: cd builddir &amp;&amp; ./benchmark_sumsum --benchmark_format=json | tee benchmark_result.json

    - name: Store benchmark result
      uses: benchmark-action/github-action-benchmark@v1
      with:
        tool: &#39;googlecpp&#39;
        output-file-path: builddir/benchmark_result.json
        github-token: ${{ secrets.GITHUB_TOKEN }}
        comment-on-alert: true
        summary-always: true
        fail-on-alert: true
        auto-push: true
        comment-always: true
</code></pre> </div><br>ã™ã‚‹ã¨ã€<br><figure><img src="cpp_ci/image-6.png" ><figcaption></figcaption></figure><br>ã“ã‚“ãªæ„Ÿã˜ã§ã€å„ã‚³ãƒŸãƒƒãƒˆã«å¯¾ã—ã¦ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®çµæœã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚<br>ã•ã‚‰ã«ã€ä¾‹ãˆã° <span class="inline-code"> <code>mylib.hpp</code> </span> ã‚’<br><div class="code-block"> <pre><code class="language-cpp">#include &quot;mylib.hpp&quot;
#include &lt;unistd.h&gt;

int sum(int a, int b, int c) {
    return a + b + c;
}

int try_to_sum(int a, int b, int c) {
    usleep(1 * 1000 * 1000);
    if (a + b + c &gt; 100) {
        return -1;
    }
    return a + b + c;
}
</code></pre> </div><br>ã“ã‚“ãªæ„Ÿã˜ã«ã—ã¦ 1ç§’ã® <span class="inline-code"> <code>sleep</code> </span> ã‚’å…¥ã‚Œã¦ã‚‚ã®ã™ã”ããƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è½ã¨ã™ã‚ˆã†ã«ã—ã¦ã¿ã‚‹ã¨ã€<br><figure><img src="cpp_ci/image-7.png" ><figcaption></figcaption></figure><br>ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã™ï¼ä¾¿åˆ©ï¼<br><br>ã•ã‚‰ã«ã€ <span class="inline-code"> <code>gh-pages</code> </span> ãƒ–ãƒ©ãƒ³ãƒã‚’ç”Ÿã‚„ã—ã¦ãŠã„ã¦ã€ GitHub Pages ã‚’ gh-pages èµ·ç‚¹ã§ä½œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãŠãã¨ã€<br><figure><img src="cpp_ci/image-5.png" ><figcaption></figcaption></figure><br>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æ¨ç§»ã‚’è¦‹ã‚‰ã‚Œã‚‹ãƒšãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ä¾¿åˆ©ã€‚<br><script>page_contents.push({
    "type":"H3",
    "id":"351",
    "title":"ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬"
});
</script>
<h3 id="351">ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬</h3><br>æœ€å¾Œã«ã€ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ã‚’ Codecov ã§è¡Œã†ã‚ˆã†ã«ã—ã¾ã™ã€‚<br><url> <a href="https://app.codecov.io/">https://app.codecov.io/</a> </url> ã«ã„ã£ã¦ã€€Key ã‚’ã‚‚ã‚‰ã„ã€ Secrets ã«ç™»éŒ²ã—ã¦ãŠãã¾ã™ã€‚<br><br>æœ¬å½“ã«è¨ˆæ¸¬ã™ã‚‹éƒ¨åˆ†ã¯ã‚‚ã†ã§ãã¦ã„ã‚‹ã®ã§ã€ã‚ã¨ã¯ãã‚Œã‚’ XML å½¢å¼ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ Codecov ã«æ¸¡ã™ã ã‘ã§ã™ã€‚ å…¬å¼ã® example ã‚„è‰²ã‚“ãªæƒ…å ±ã‚’è¦‹ã‚‹ã¨ <span class="inline-code"> <code>bash (curl codecov...)</code> </span> ã®ã‚ˆã†ãªäº‹ã‚’ã—ã¦ç›´æ¥(?) ã—ã¦ã„ã‚‹ã‚‚ã®ãŒå¤šã„ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã« Actions çµŒç”±ã§æ¸¡ã™æ–¹ãŒè‰²ã€…è¨­å®šã§ãã¦åœ§å€’çš„ã«è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚<br><br><div class="code-block"> <pre><code class="language-yaml">name: Codecov

on: [push, pull_request]

jobs:
  upload:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Set up Meson
      run: sudo apt-get install -y meson ninja-build

    - name: Install dependencies
      run: bash install.sh
    
    - name: Build
      run: meson setup builddir_cov --buildtype=debugoptimized -Db_coverage=true &amp;&amp; meson compile -C builddir_cov

    - name: Test
      run: cd builddir_cov &amp;&amp; ./test_sumsum

    - name: Export XML
      run: cd builddir_cov &amp;&amp; ninja coverage-xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v4
      with:
        token: ${{ secrets.CODECOV_TOKEN }}
        files: builddir_cov/meson-logs/coverage.xml
</code></pre> </div><br>ã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬çµæœãŒè¦‹ã‚‰ã‚Œã¾ã™ã€€(Â´ãƒ»Ï‰ãƒ»ï½€)ğŸ‰<br><figure><img src="cpp_ci/image-8.png" ><figcaption></figcaption></figure><br><br><span class="inline-code"> <code>a + b + c &gt; 100</code> </span> ãªã©ãŒãƒ†ã‚¹ãƒˆã§ãã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã­ã€‚<br>ã¾ãŸã€æ–°ãŸã« PR ã‚’å‡ºã™ã¨<br><figure><img src="cpp_ci/image-9.png" ><figcaption></figcaption></figure><br>ã‚«ãƒãƒ¬ãƒƒã‚¸ã®å¤‰åŒ–ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚ä¾¿åˆ©ã€‚<br><script>page_contents.push({
    "type":"H2",
    "id":"381",
    "title":"ã¾ã¨ã‚"
});
</script>
<h2 id="381">ã¾ã¨ã‚</h2><br><br>å®Ÿã¯æœ€åˆã¯ CMake + devcontainer ãªã—ã§ã‚„ã‚ã†ã¨ã—ã¦æœ¬å½“ã«é…·ã„ç›®ã‚ã£ãŸã‚Šã—ã¦ã„ã¾ã—ãŸã€‚<br>(ä¾‹ãˆã°ã€ã¡ã‚ƒã‚“ã¨ <span class="inline-code"> <code>CXX=g++</code> </span> ãªäº‹ã‚’ã—ã¦ã‚‚ <span class="inline-code"> <code>gcov</code> </span> ã¯ Clang ç”¨ã®ã‚‚ã®ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å®Ÿã¯ä½¿ã‚ã‚Œã¦ã„ã¦ã€ã€ã€ãªã©ã®ãƒ‘ãƒƒã¨ã‚ã‹ã‚‰ãªã„ä¾å­˜ãŒãŸãã•ã‚“ã‚ã‚Šã€å¤§å¤‰ãªã“ã¨ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚)<br><br>ä»¤å’Œã®ä¸–ã®ä¸­ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¯ã‚‚ã¯ã‚„ãã®ã‚‚ã®ã§ã¯ãªãã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã€ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®æ”¯æ´ etc... ã«ã‚ˆã£ã¦å·®ãŒã¤ãã€ã¿ãŸã„ãªã“ã¨ãŒè¨€ã‚ã‚Œã¦ä¹…ã—ã„ã§ã™ãŒã€ãã‚Œã‚’ã²ã—ã²ã—ã¨æ„Ÿã˜ã‚‹ä½œæ¥­ã§ã—ãŸã€‚<br>ç´„2æ—¥é–“ã€ã€ŒC++ ã‚„ã‚ã¦ã„ã„ï¼Ÿã€ã—ã‹è¨€ã£ã¦ã„ãªã‹ã£ãŸã§ã™ã€‚<br><br>ã¨ã¯ã„ãˆã€ Meson ã¯çµæ§‹ã„ã„ã‚‚ã®ã‚’çŸ¥ã£ãŸãªã¨ã„ã†æ°—æŒã¡ã§ã™ã€‚ã“ã‚Œã§è‰²ã€…ã¨é–‹ç™ºã‚’ä¾¿åˆ©ã«ã—ã¦ã„ããŸã„ã€‚<br><script>page_contents.push({
    "type":"H2",
    "id":"401",
    "title":"ä»Šæ—¥ã®ä¸€æ›²"
});
</script>
<h2 id="401">ä»Šæ—¥ã®ä¸€æ›²</h2><br><iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1591947091&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/koshy-226161802" title="Watson (Official)" target="_blank" style="color: #cccccc; text-decoration: none;">Watson (Official)</a> Â· <a href="https://soundcloud.com/koshy-226161802/mj-freestyle" title="MJ Freestyle" target="_blank" style="color: #cccccc; text-decoration: none;">MJ Freestyle</a></div><br><div class="footnote"><span class="footnote-def" id="label_1"><a href="#ref_1">[1]</a> <url> <a href="https://logmi.jp/tech/articles/330373">ã€Œè‡ªåˆ†ã®æœªæ¥äºˆæ¸¬ã‚’ä¿¡ã˜ã¦ã¡ã‚‡ã£ã¨æ„åœ°ã‚’å¼µã£ã¦ã¿ã‚‹ã€ ã¾ã¤ã‚‚ã¨ã‚†ãã²ã‚æ°ãŒRubyã«å‹å®£è¨€ã‚’å…¥ã‚Œãªã„ç†ç”±</a> </url> ã‚ˆã‚Š.</span></div>

            <hr>

            <!-- è¨˜äº‹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="article-navigation">

                <div class="nav-item nav-prev">
                    <a href="https://abap34.com/posts/jci_02.html">
                        <div class="nav-direction">â† å‰ã®è¨˜äº‹</div>
                        <div class="nav-title">Julia Compiler Internals (02) - Lowering (2) for ã® linearize</div>
                    </a>
                </div>

                <div class="nav-item nav-next">
                    <a href="https://abap34.com/posts/hurikaeri_2024_0.html">
                        <div class="nav-direction">æ¬¡ã®è¨˜äº‹ â†’</div>
                        <div class="nav-title">2024å¹´åº¦å‰æœŸæŒ¯ã‚Šè¿”ã‚Š</div>
                    </a>
                </div>
</div>

            <!-- ãƒ¢ãƒã‚¤ãƒ«ç”¨é–¢é€£è¨˜äº‹ï¼ˆä¸€ç•ªä¸‹ã«è¡¨ç¤ºï¼‰ -->
            <div class="mobile-related-articles">
<div class="related-articles tag-related">
<h3 class="related-title">åŒã˜ã‚ˆã†ãªã‚¿ã‚°ã®è¨˜äº‹</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/slide-template.html">
                            <div class="related-item-title">Marp + GitHub Actionsã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ãŸ</div>
                            <div class="related-date">2024/03/14</div>
                            <div class="related-tags"><span class="related-tag">#æ—¥è¨˜</span> <span class="related-tag">#Marp</span> <span class="related-tag">#GitHub Actions</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/pybind11.html">
                            <div class="related-item-title">pybind11 ã‚’ä½¿ã£ã¦ C++ã®é–¢æ•°ã‚’ãƒã‚¤ãƒ³ãƒ‰ã—ã¦ Pythonã‹ã‚‰å‘¼ã³å‡ºã™ (m1mac)</div>
                            <div class="related-date">2024/05/14</div>
                            <div class="related-tags"><span class="related-tag">#C++</span> <span class="related-tag">#Python</span> <span class="related-tag">#pybind11</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/githubactions_trap.html">
                            <div class="related-item-title">GitHub Actionsã§éå»ã‚³ãƒŸãƒƒãƒˆã¨ã‹ã‚’å‚ç…§ã—ãŸã„ã¨ãã¯fetch-depthã‚’æŒ‡å®šã—ãªã„ã¨ãƒ€ãƒ¡ã ã£ãŸ</div>
                            <div class="related-date">2023/08/29</div>
                            <div class="related-tags"><span class="related-tag">#GitHub Actions</span> <span class="related-tag">#GitHub</span> <span class="related-tag">#git</span></div>
                            </a>
                    </div>
</div>
<div class="related-articles tfidf-related">
<h3 class="related-title">åŒã˜ã‚ˆã†ãªå†…å®¹ã®è¨˜äº‹</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/gsoc2025_final_report.html">
                            <div class="related-item-title">GSoC 2025 Final Report â”€ Development of a New Language Server for Julia</div>
                            <div class="related-date">2025/09/01</div>
                            <div class="related-tags"><span class="related-tag">#Julia</span> <span class="related-tag">#Language Server</span> <span class="related-tag">#ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/slide-template.html">
                            <div class="related-item-title">Marp + GitHub Actionsã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ãŸ</div>
                            <div class="related-date">2024/03/14</div>
                            <div class="related-tags"><span class="related-tag">#æ—¥è¨˜</span> <span class="related-tag">#Marp</span> <span class="related-tag">#GitHub Actions</span></div>
                            </a>
                    </div>
</div>
</div>

            <hr>
            <!-- ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ (Utterances) -->
            <script src="https://utteranc.es/client.js" repo="abap34/abap34com-comment" issue-term="og:title"
                label="comment" theme="github-light" crossorigin="anonymous" async>
                </script>
        </div>

        <!-- å³ã‚µã‚¤ãƒ‰ãƒãƒ¼ (é–¢é€£è¨˜äº‹) -->
        <div class="right-sidebar">
            <div class="right-sidebar-sticky">
                <div class="related-articles tag-related">
<h3 class="related-title">åŒã˜ã‚ˆã†ãªã‚¿ã‚°ã®è¨˜äº‹</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/slide-template.html">
                            <div class="related-item-title">Marp + GitHub Actionsã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ãŸ</div>
                            <div class="related-date">2024/03/14</div>
                            <div class="related-tags"><span class="related-tag">#æ—¥è¨˜</span> <span class="related-tag">#Marp</span> <span class="related-tag">#GitHub Actions</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/pybind11.html">
                            <div class="related-item-title">pybind11 ã‚’ä½¿ã£ã¦ C++ã®é–¢æ•°ã‚’ãƒã‚¤ãƒ³ãƒ‰ã—ã¦ Pythonã‹ã‚‰å‘¼ã³å‡ºã™ (m1mac)</div>
                            <div class="related-date">2024/05/14</div>
                            <div class="related-tags"><span class="related-tag">#C++</span> <span class="related-tag">#Python</span> <span class="related-tag">#pybind11</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/githubactions_trap.html">
                            <div class="related-item-title">GitHub Actionsã§éå»ã‚³ãƒŸãƒƒãƒˆã¨ã‹ã‚’å‚ç…§ã—ãŸã„ã¨ãã¯fetch-depthã‚’æŒ‡å®šã—ãªã„ã¨ãƒ€ãƒ¡ã ã£ãŸ</div>
                            <div class="related-date">2023/08/29</div>
                            <div class="related-tags"><span class="related-tag">#GitHub Actions</span> <span class="related-tag">#GitHub</span> <span class="related-tag">#git</span></div>
                            </a>
                    </div>
</div>
<div class="related-articles tfidf-related">
<h3 class="related-title">åŒã˜ã‚ˆã†ãªå†…å®¹ã®è¨˜äº‹</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/gsoc2025_final_report.html">
                            <div class="related-item-title">GSoC 2025 Final Report â”€ Development of a New Language Server for Julia</div>
                            <div class="related-date">2025/09/01</div>
                            <div class="related-tags"><span class="related-tag">#Julia</span> <span class="related-tag">#Language Server</span> <span class="related-tag">#ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/slide-template.html">
                            <div class="related-item-title">Marp + GitHub Actionsã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ãŸ</div>
                            <div class="related-date">2024/03/14</div>
                            <div class="related-tags"><span class="related-tag">#æ—¥è¨˜</span> <span class="related-tag">#Marp</span> <span class="related-tag">#GitHub Actions</span></div>
                            </a>
                    </div>
</div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; abap34</p>
    </footer>

    <!-- 4) TOC è‡ªå‹•ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã© -->
    <script>
        const tocContainer = document.querySelector("#toc");
        const tocTitle = document.createElement("div");
        tocTitle.innerHTML = title;
        tocTitle.classList.add("toc_title");
        tocContainer.appendChild(tocTitle);

        // TOC è¦ç´ ç”Ÿæˆ
        page_contents.forEach(item => {
            if (item.type == "H1" || item.type === "H2" || item.type === "H3") {
                const listItem = document.createElement("li");
                listItem.innerHTML = `<a href="#${item.id}">${item.title}</a>`;
                listItem.classList.add("toc_" + item.type);
                tocContainer.appendChild(listItem);
            }
        });

        // IntersectionObserver ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã« active æ›´æ–°
        const options = {
            root: null,
            rootMargin: "-50% 0px",
            threshold: 0
        };
        const observer = new IntersectionObserver(onIntersection, options);

        page_contents.forEach(item => {
            const element = document.getElementById(item.id);
            if (element) observer.observe(element);
        });

        const first_item = document.querySelector(`#toc a[href="#${page_contents[0].id}"]`);
        first_item.classList.add("active");
        let prev_item = first_item;

        function onIntersection(entries) {
            entries.forEach(entry => {
                const id = entry.target.id;
                const tocItem = document.querySelector(`#toc a[href="#${id}"]`);
                if (tocItem) {
                    if (entry.isIntersecting) {
                        tocItem.classList.add("active");
                        prev_item.classList.remove("active");
                        prev_item = tocItem;
                    }
                }
            });
        }

        // ã‚¿ã‚°è£…é£¾
        let tag = document.querySelector(".tag-placeholder").innerHTML;
        document.querySelector(".tag-placeholder").innerHTML = "";
        tag = tag.replace("[", "").replace("]", "").split(", ").map(t => t.trim());

        tag.forEach(t => {
            const each_tag = document.createElement("span");
            each_tag.classList.add("tag");
            each_tag.innerHTML = "<a href='https://abap34.com/search?tag=" + t + "'> # " + t + "</a>";
            document.querySelector(".tag-placeholder").appendChild(each_tag);
        });

        function applyTheme(theme) {
            const highlightTheme = document.getElementById('highlight-theme');
            
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').textContent = 'â˜€ï¸';
                // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒã«å¤‰æ›´
                highlightTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/styles/monokai.min.css';
            } else {
                document.body.classList.remove('dark-mode');
                document.getElementById('theme-toggle').textContent = 'ğŸŒ™';
                // ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒã«å¤‰æ›´
                highlightTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/styles/github.min.css';
            }
            
            // highlight.jsã‚’å†å®Ÿè¡Œã—ã¦ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’æ›´æ–°
            setTimeout(() => {
                document.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            }, 100); // CSSã®èª­ã¿è¾¼ã¿ã‚’å°‘ã—å¾…ã¤
        }

        // åˆæœŸè¡¨ç¤ºï¼šlocalStorage ã«ä¿å­˜ã•ã‚ŒãŸãƒ†ãƒ¼ãƒãŒã‚ã‚Œã°ãã‚Œã‚’é©ç”¨ã—ã€ãªã‘ã‚Œã° OS ã®è¨­å®šã«å¾“ã†
        let storedTheme = localStorage.getItem('theme');
        if (storedTheme) {
            applyTheme(storedTheme);
        } else {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                applyTheme('dark');
                localStorage.setItem('theme', 'dark');
            } else {
                applyTheme('light');
                localStorage.setItem('theme', 'light');
            }
        }

        const themeToggleButton = document.getElementById('theme-toggle');

        // ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        themeToggleButton.addEventListener('click', function () {
            let newTheme = document.body.classList.contains('dark-mode') ? 'light' : 'dark';
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        });


        // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«è¡Œæ•°ã¨ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã‚’è¿½åŠ 
        /// ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«è¡Œæ•°ã¨ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã‚’è¿½åŠ ï¼ˆpre/code ã¯ä¿æŒï¼‰
        (() => {
            // ä»˜éšã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆå¿…è¦ãªã‚‰ä¸€åº¦ã ã‘æ³¨å…¥ï¼‰
            if (!document.getElementById('cb-ln-style')) {
                const style = document.createElement('style');
                style.id = 'cb-ln-style';
                style.textContent = `
.cb{position:relative;margin:1rem 0;border:1px solid #e0e0e0;border-radius:.4rem;overflow:hidden}
.cb-toolbar{display:flex;justify-content:space-between;align-items:center;font:12px/1.2 ui-monospace,Menlo,Consolas,monospace;background:#f7f7f7;padding:.35rem .5rem;border-bottom:1px solid #e0e0e0}
.cb-lang{opacity:.7}
.cb-copy{cursor:pointer;border:0;background:#eee;padding:.25rem .5rem;border-radius:.25rem}
.cb-copy:active{transform:translateY(1px)}
.cb-body{display:grid;grid-template-columns:auto 1fr}
.cb-gutter{margin:0; padding:0rem .5rem .5rem .5rem; list-style:none; counter-reset:ln; text-align:right; user-select:none; overflow:auto; border-right:1px solid #e0e0e0}
.cb-gutter li{counter-increment:ln; line-height:1.5; font:13px/1.5 ui-monospace,Menlo,Consolas,monospace; opacity:.55}
.cb-gutter li::before{content: counter(ln);}
.cb-pre{margin:0; padding:.5rem .75rem; overflow:auto}
.cb.dark{border-color:#333}
.cb.dark .cb-toolbar{background:#2b2b2b;border-bottom-color:#333;color:#ddd}
.cb.dark .cb-copy{background:#3a3a3a;color:#eee}
.cb.dark .cb-gutter{border-right-color:#333}
`;
                document.head.appendChild(style);
            }

            const isDark = () => document.body.classList.contains('dark-mode');

            document.querySelectorAll('pre > code').forEach((code) => {
                const pre = code.parentElement;
                if (pre.dataset.enhanced === '1') return;

                // è¡Œæ•°ã‚’æ•°ãˆã‚‹ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã§æ•°ãˆã‚‹ã®ã§ãƒã‚¤ãƒ©ã‚¤ãƒˆã¯ç¶­æŒï¼‰
                const text = code.textContent.replace(/\n$/, '');
                const lineCount = Math.max(1, text.split('\n').length);

                // ãƒ©ãƒƒãƒ‘ç”Ÿæˆ
                const wrapper = document.createElement('div');
                wrapper.className = 'cb' + (isDark() ? ' dark' : '');

                const toolbar = document.createElement('div');
                toolbar.className = 'cb-toolbar';

                // è¨€èªè¡¨ç¤ºï¼ˆlanguage-xxx ã‚’æ‹¾ã†ï¼‰
                const langClass = [...code.classList].find(c => c.startsWith('language-')) || '';
                const lang = (langClass.replace('language-', '') || code.getAttribute('data-lang') || 'code').toUpperCase();
                const langSpan = document.createElement('span');
                langSpan.className = 'cb-lang';
                langSpan.textContent = lang;

                const copyBtn = document.createElement('button');
                copyBtn.type = 'button';
                copyBtn.className = 'cb-copy';
                copyBtn.textContent = 'Copy';

                toolbar.append(langSpan, copyBtn);

                // æœ¬ä½“ï¼ˆè¡Œç•ªå· + æ—¢å­˜ pre/codeï¼‰
                const body = document.createElement('div');
                body.className = 'cb-body';

                // è¡Œç•ªå·ã‚¬ã‚¿ãƒ¼
                const gutter = document.createElement('ol');
                gutter.className = 'cb-gutter';
                for (let i = 0; i < lineCount; i++) {
                    const li = document.createElement('li');
                    gutter.appendChild(li);
                }

                // æ—¢å­˜ pre ã‚’ç§»è¨­ã—ã¦ã‚¯ãƒ©ã‚¹ä»˜ä¸ã®ã¿
                pre.classList.add('cb-pre');
                const container = document.createElement('div');
                container.appendChild(pre.cloneNode(true)); // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŒæœŸã®ãŸã‚ã‚¯ãƒ­ãƒ¼ãƒ³ã›ãšç§»å‹•ã§ã‚‚ã‚ˆã„
                // ç½®æ›æ™‚ã«å…ƒã® pre ã‚’å·®ã—æ›¿ãˆã‚‹
                pre.replaceWith(wrapper);
                // wrapper é…ä¸‹ã‚’æ§‹ç¯‰
                wrapper.appendChild(toolbar);
                wrapper.appendChild(body);
                body.appendChild(gutter);
                body.appendChild(container.firstChild); // å…ƒã® pre

                // ã‚³ãƒ”ãƒ¼
                copyBtn.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(text);
                        const prev = copyBtn.textContent;
                        copyBtn.textContent = 'Copied';
                        setTimeout(() => (copyBtn.textContent = prev), 1200);
                    } catch {
                        copyBtn.textContent = 'Failed';
                        setTimeout(() => (copyBtn.textContent = 'Copy'), 1200);
                    }
                });

                // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŒæœŸ
                const preEl = wrapper.querySelector('pre.cb-pre');
                const sync = () => { gutter.scrollTop = preEl.scrollTop; };
                preEl.addEventListener('scroll', sync);

                // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åŒæœŸ
                const mo = new MutationObserver(() => {
                    if (isDark()) wrapper.classList.add('dark'); else wrapper.classList.remove('dark');
                });
                mo.observe(document.body, { attributes: true, attributeFilter: ['class'] });

                // å®Œäº†ãƒ•ãƒ©ã‚°
                pre.dataset.enhanced = '1';
            });
        })();



    </script>

    </script>

</body>

</html>
