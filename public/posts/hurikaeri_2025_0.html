<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
<meta charset="UTF-8">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-10Y7GMS7GV"></script>
    <script>
        if (location.hostname !== "localhost") {
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-10Y7GMS7GV');
        }
    </script>

    <script type="text/javascript" src="//code.typesquare.com/static/ZDbTe4IzCko%253D/ts106f.js"
        charset="utf-8"></script>

    <title>2025年度前期振り返り</title>

    <!-- OGP / Twitter 用のメタタグ -->
    <meta property="og:title" content="2025年度前期振り返り">
    <meta property="og:image" content="https://images.dog.ceo/breeds/doberman/n02107142_413.jpg">
    <meta property="og:description" content="2025年度前期の振り返りです。">
    <meta property="og:url" content="https://abap34.com/posts/hurikaeri_2025_0.html">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="abap34's blog">
    <meta property="og:locale" content="ja_JP">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="abap34" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- ハイライトJS / FontAwesome -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/styles/a11y-light.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/julia.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/julia-repl.min.js"></script>
    <script src="https://unpkg.com/highlightjs-lean/dist/lean.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/scheme.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/languages/dockerfile.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- その他ライブラリ -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ext-language_tools.js"></script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <!-- CSS -->
    <style>*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html,
body {
    width: 100%;
    min-height: 100vh;
    /* 画面全体に背景が伸びるようにする */
    background-color: #fff;
    color: #333;
    font-family: monospace, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    line-height: 1.5;
    /* 文字ちょっと */
    /*  global-header のぶんを押し下げる */
    /* padding-top: 3.0rem; */
    /* ↑ global-header側下げた */

    /* 長い単語も強制的に改行 */
    word-wrap: break-word;
}

/* 句読点だけは日本語フォントを使う */
@font-face {
    font-family: "Noto Serif JP";
    src: local("Noto Serif JP"),
        url("https://fonts.gstatic.com/ea/notoserifjp/v6/NotoSerifJP-Regular.woff2") format("woff2"),
        url("https://fonts.gstatic.com/ea/notoserifjp/v6/NotoSerifJP-Regular.woff") format("woff");
    font-weight: 200;
    font-style: normal;
    unicode-range: U+3000-303F, U+3040-309F, U+30A0-30FF, U+FF00-FFEF, U+4E00-9FAF, U+3400-4DBF;
}

/* ===============================================
      Layout
      =============================================== */

/* デスクトップでモバイル専用要素を非表示 */
.mobile-sidebar,
.mobile-related-articles {
    display: none;
}

/* モバイル用サイドバーの基本スタイル */
.mobile-sidebar {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
}

.article-body {
    display: flex;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
    gap: 2rem;
}

.side {
    width: 240px;
    flex-shrink: 0;
}

.side-sticky {
    position: sticky;
    top: 3.5rem;
}

.sidebar {
    padding: 0.5rem;
    max-height: 80vh;
    overflow-y: auto;
}

.content {
    flex: 1;
    padding: 0.5rem;
    min-width: 0;
    /* 内容があふれにくいように */
}

/* 右サイドバー */
.right-sidebar {
    width: 340px;
    flex-shrink: 0;
    padding: 0.5rem;
}

.right-sidebar-sticky {
    position: sticky;
    top: 3.5rem;
    max-height: calc(100vh - 4rem);
    overflow-y: auto;
}

/* ===============================================
      Header
      =============================================== */
/* 一番上に常に固定するヘッダ */
.global-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 999;
    background: #ffffffbb;
    border-bottom: 1px solid #ddd;
    padding: 0.5rem 1rem;

    /* 要素は横に並べる */
    display: flex;
    justify-content: space-between;
    align-items: center;

    /* blur */
    backdrop-filter: blur(10px);

}

.article-header {
    padding: 1rem;
    /* margin-bottom: 1rem; */
    padding-top: 6rem;
    max-width: 800px;
    margin: 0 auto;
}

.title {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.date {
    font-size: 0.9rem;
    color: #777;
    margin-bottom: 0.5rem;
}

.tag-placeholder {
    margin-top: 0.5rem;
}

.tag {
    display: inline-block;
    margin-right: 0.4rem;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    background-color: #eee;
    font-size: 0.8rem;
    color: #333;
}

.tag:hover {
    background-color: #ddd;
}

.tag a {
    color: inherit;
    text-decoration: none;
}

/* ===============================================
      TOC
      =============================================== */
.toc_title {
    display: none;
}

#toc {
    list-style: none;
    padding-left: 0;
    font-size: 0.9rem;
    color: #555;
    line-height: 1.4;
}

#toc li {
    margin: 0.4rem 0;
}

#toc a {
    text-decoration: none;
    color: #555;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    transition: background-color 0.1s, opacity 0.1s;
    opacity: 1;
}

#toc a:hover {
    background-color: #f0f0f0;
    opacity: 1;
}

#toc a.active {
    background-color: #777;
    color: #fff;
    opacity: 1 !important;
}

/* 階層によるインデント */
.toc_H1 {
    margin-left: 0;
}

.toc_H2 {
    margin-left: 1rem;
}

.toc_H3 {
    padding-left: 1.5rem;
}

/* ===============================================
      Content
      =============================================== */

/* 見出しの見た目を少し改善し、下線とパディングを追加 */
.content h1,
.content h2,
.content h3,
.content h4,
.content h5,
.content h6 {
    font-weight: bold;
    margin-top: 2rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid #ccc;
    padding-bottom: 0.3rem;
    color: #333;
}

h5 {
    font-size: 1.1rem;
}

.content p {
    margin-bottom: 1rem;
}

/* インラインコードを本文と区別しやすく */
.content .inline-code {
    background-color: #f6f8fa;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 0rem 0rem;
    margin: 0 0rem;
    font-size: 0.95em;
    overflow-wrap: break-word;
    word-break: break-all;
    white-space: pre-wrap;
    max-width: 100%;
}

/* 箇条書きの字下げ */
.content ul,
.content ol,
.content dl {
    margin-left: 2.5rem !important;
    margin-top: 0.5rem !important;
    margin-bottom: 0rem !important;
}

/* 画像や動画のはみ出し対策 (特に縦長画像) */
.content img,
.content video {
    max-width: 80%;
    max-height: 80vh;
    /* ビューポートの80%を上限に */
    height: auto;
    display: block;
    border: 1px solid #ddd;
    /* 真ん中に置く */
    margin: 1rem auto;
}


/* テーブルのデザイン (シンプル＆見やすい) */
table {
    width: 100%;
    border-collapse: collapse;
    /* 余分な隙間を除去 */
    margin: 1rem 0;
    font-size: 0.95rem;
    line-height: 1.4;
    margin: 1rem;
}

table thead th {
    background-color: #f6f8fa;
    border-bottom: 2px solid #ccc;
    padding: 0.6rem 0.8rem;
    text-align: left;
    font-weight: bold;
}

table th,
table td {
    border: 1px solid #ddd;
    padding: 0.5rem 0.8rem;
    vertical-align: top;
}

table tbody tr:nth-child(even) {
    background-color: #f9f9f9;
    /* 偶数行に薄い背景 */
}

table tbody tr:hover {
    background-color: #f0f0f0;
    /* ホバー時の強調 */
}

content a {
    word-break: break-all;
    color: #80bdff;
    text-decoration: none;
}

iframe {
    width: 100%;
}

figure {
    margin: 1rem 0;
}

figcaption {
    color: #777;
    /* 真ん中に置く */
    display: block;
    margin-top: 0.5rem;
    text-align: center;
}


strong {
    /* ちょっと強めに */
    font-weight: 1000;
}

/* ===============================================
      Footer
      =============================================== */
footer {
    margin-top: 2rem;
    text-align: center;
    font-size: 0.8rem;
    color: #666;
}

/* ===============================================
      Responsive
      =============================================== */
@media (max-width: 768px) {
    .article-body {
        flex-direction: column;
        padding: 0 1rem;
    }

    .side {
        width: 100%;
        margin-bottom: 1.5rem;
        /* height: 100vh; を削除、autoに */
        height: auto;
    }

    .content {
        width: 100%;
    }
}

/* ===============================================
      Note / Warn / Danger blocks
      =============================================== */
.info {
    background-color: #f0f0f0;
    padding: 1rem;
    border-left: 5px solid #80bdff;
    margin: 1rem;

}

/* Warn: ちょっと強めの注意喚起 (オレンジ系) */
.warn {
    background-color: #fff3e0;
    /* 薄いオレンジ */
    padding: 1rem;
    border-left: 5px solid #ffa500;
    /* オレンジ */
    margin: 1rem;
}

/* Danger: 重大な警告 (赤系) */
.danger {
    background-color: #ffe7e7;
    /* 薄い赤 */
    padding: 1rem;
    border-left: 5px solid #ff4d4f;
    /* 赤 */
    margin: 1rem;
}

/* ===============================================
      Math Blocks (theorem / lemma / corollary / etc.)
      =============================================== */

/* Theorem / Lemma / Corollary / Proposition / Definition / Proof それぞれに共通するベース */
/* ベース: 背景は透明、左に太線のみ */
.theorem,
.lemma,
.corollary,
.proposition,
.definition,
.proof {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding: 1rem;
    background: none;
    border: 1px solid #ddd;
    /* 行間ちょっとだけ広く */
    line-height: 2.0;
}

/* Theorem */
.theorem {
    counter-increment: theorem;
}

.theorem::before {
    content: "Theorem " counter(theorem) " ";
    font-weight: bold;
    color: #333;
}

/* Lemma */
.lemma {
    counter-increment: lemma;
}

.lemma::before {
    content: "Lemma " counter(lemma) " ";
    font-weight: bold;
    color: #333;
}

/* Corollary */
.corollary {
    counter-increment: corollary
}

.corollary::before {
    content: "Corollary " counter(corollary) " ";
    font-weight: bold;
    color: #333;
}

/* Proposition */
.proposition {
    counter-increment: proposition;
}

.proposition::before {
    content: "Proposition " counter(proposition) " ";
    font-weight: bold;
    color: #333;
}

/* Definition */
.definition {
    counter-increment: definition;
}

.definition::before {
    content: "Definition " counter(definition) " ";
    font-weight: bold;
    color: #333;
}

/* Proof */
.proof {
    counter-increment: proof;
}

.proof::before {
    content: "Proof " counter(proof) " ";
    font-weight: bold;
    color: #333;
}

/* 最後の段落が余計な下余白を取らないための調整 */
.theorem p:last-child,
.lemma p:last-child,
.corollary p:last-child,
.proposition p:last-child,
.definition p:last-child,
.proof p:last-child {
    margin-bottom: 0;
}

.math-block {
    overflow-x: auto;
    overflow-y: hidden;
    font-size: 0.85em;
}

.math-inline {
    display: inline-grid;
    overflow: hidden !important;
    font-size: 0.85em;
    max-width: 100%;
}

/* ===============================================
      Footnotes
        =============================================== */

/* 脚注リンクのスタイル */


.footnote-ref {
    font-size: 0.8em;
    vertical-align: super;
    color: #777;
}

.footnote-ref a {
    color: #777;
    text-decoration: none;
}

.footnote-ref a:hover {
    text-decoration: underline;
}

/* 脚注本体のスタイル */
.footnotes {
    margin-top: 1rem;
    padding: 1rem;
    border: 1px solid #ddd;
    font-size: 0.9em;
}

.footnote-def {
    margin-bottom: 0.5rem;
    /* 改行 */
    padding: 0.2rem 0.5rem;
    border-left: 3px solid #ddd;
    display: block;
}

.footnote-def p {
    margin-bottom: 0;
}


.responsive-card {
    border: 1px solid #ccc;
    padding: 5px;
    display: flex;
    flex-direction: row;
    align-items: center;
    max-width: 600px;
    margin: 10px auto;
    word-break: break-all;
}

.responsive-card img {
    width: 90%;
    max-width: 300px;
    border: none;
    margin: 0;
    max-height: 200px;
    object-fit: cover;
}

.responsive-card .text-container {
    margin: 0 10px;
}

@media (max-width: 600px) {
    .responsive-card {
        flex-direction: column;
        text-align: center;
    }

    .responsive-card .text-container {
        margin: 10px 0 0 0;
    }

    .responsive-card img {
        width: 100%;
        max-width: 100%;
    }
}


/* ========================== */
/* ここからテーマ切り替え用のスタイル */
/* ========================== */
/* ▼ ダークモード用オーバーライド (ユーザが手動でダークモードを選択した場合) */
body.dark-mode {
    background-color: #1f2022 !important;
    color: #e0e0e0 !important;
}

body.side.dark-mode {
    background-color: #1f2022 !important;
}

body.dark-mode .article-body {
    background-color: #1f2022 !important;
    color: #e0e0e0 !important;
}


body.dark-mode .global-header {
    background-color: #1f20229a !important;
    border-bottom: 1px solid #444 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .article-header {
    color: #e0e0e0 !important;
}

body.dark-mode .content {
    color: #e0e0e0 !important;
}

body.dark-mode .content h1,
body.dark-mode .content h2,
body.dark-mode .content h3,
body.dark-mode .content h4,
body.dark-mode .content h5,
body.dark-mode .content h6 {
    color: #e0e0e0 !important;
    border-bottom: 1px solid #555 !important;
}

body.dark-mode .content .inline-code {
    background-color: #2d2d2d !important;
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}


body.dark-mode .content a {
    color: #8ab4f8 !important;
}

body.dark-mode table thead th {
    background-color: #333 !important;
    border-bottom: 2px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode table th,
body.dark-mode table td {
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode table tbody tr:nth-child(even) {
    background-color: #1e1e1e !important;
}

body.dark-mode table tbody tr:hover {
    background-color: #2a2a2a !important;
}

body.dark-mode .tag {
    background-color: #333 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .tag:hover {
    background-color: #444 !important;
}

body.dark-mode #toc {
    color: #bbb !important;
}

body.dark-mode #toc a {
    color: #bbb !important;
}

body.dark-mode #toc a.active {
    background-color: #555 !important;
    color: #fff !important;
}

body.dark-mode footer {
    color: #aaa !important;
}


body.dark-mode .info {
    background-color: #2a2a2a !important;
    border-left: 5px solid #80bdff !important;
    color: #e0e0e0 !important;
}

body.dark-mode .warn {
    background-color: #3a2a1a !important;
    border-left: 5px solid #ffb74d !important;
    color: #e0e0e0 !important;
}

body.dark-mode .danger {
    background-color: #4a1a1a !important;
    border-left: 5px solid #ff4d4f !important;
    color: #e0e0e0 !important;
}

body.dark-mode .theorem,
body.dark-mode .lemma,
body.dark-mode .corollary,
body.dark-mode .proposition,
body.dark-mode .definition,
body.dark-mode .proof {
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .footnotes {
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode .footnote-def {
    border-left: 3px solid #555 !important;
    color: #e0e0e0 !important;
}

body.dark-mode a {
    color: #8ab4f8 !important;
}

body.dark-mode a:hover {
    color: #8ab4f8 !important;
}

body.dark-mode .timeline {
    background-color: #2a2b2f !important;
    border: 1px solid #444 !important;
    color: #e0e0e0 !important;
}


body.dark-mode .theorem::before,
body.dark-mode .lemma::before,
body.dark-mode .corollary::before,
body.dark-mode .proposition::before,
body.dark-mode .definition::before,
body.dark-mode .proof::before {
    color: #e0e0e0 !important;
}

body.dark-mode button {
    background-color: #333 !important;
    color: #e0e0e0 !important;
    /* 装飾なし */
    border: none;
    /* マウスオーバー時のカーソル */
    cursor: pointer;
}


/* ▼ ライトモード強制用オーバーライド (ユーザが明示的にライトモードを選択した場合) */
body.light-mode {
    background-color: #fff !important;
    color: #333 !important;
}

body.light-mode .global-header {
    background-color: #fff !important;
    border-bottom: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .article-header {
    background-color: #fff !important;
    color: #333 !important;
}

body.light-mode .content {
    background-color: #fff !important;
    color: #333 !important;
}

body.light-mode .content h1,
body.light-mode .content h2,
body.light-mode .content h3,
body.light-mode .content h4,
body.light-mode .content h5,
body.light-mode .content h6 {
    color: #333 !important;
    border-bottom: 1px solid #ccc !important;
}

body.light-mode .content .inline-code {
    background-color: #f6f8fa !important;
    border: 1px solid #ddd !important;
    color: #333 !important;
}

pre code.hljs {
    display: block;
    overflow-x: auto;
    padding: 0em !important;
}

body.light-mode .content a {
    color: #80bdff !important;
}

body.light-mode table thead th {
    background-color: #f6f8fa !important;
    border-bottom: 2px solid #ccc !important;
    color: #333 !important;
}

body.light-mode table th,
body.light-mode table td {
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode table tbody tr:nth-child(even) {
    background-color: #f9f9f9 !important;
}

body.light-mode table tbody tr:hover {
    background-color: #f0f0f0 !important;
}

body.light-mode .tag {
    background-color: #eee !important;
    color: #333 !important;
}

body.light-mode .tag:hover {
    background-color: #ddd !important;
}

body.light-mode #toc {
    color: #555 !important;
}

body.light-mode #toc a {
    color: #555 !important;
}

body.light-mode #toc a.active {
    background-color: #777 !important;
    color: #fff !important;
}

body.light-mode footer {
    color: #666 !important;
}

/* 薄青 */
body.light-mode .info {
    background-color: #f0f0f0 !important;
    border-left: 5px solid #80bdff !important;
    color: #333 !important;
}

body.light-mode .warn {
    background-color: #fff3e0 !important;
    border-left: 5px solid #ffa500 !important;
    color: #333 !important;
}

body.light-mode .danger {
    background-color: #ffe7e7 !important;
    border-left: 5px solid #ff4d4f !important;
    color: #333 !important;
}

body.light-mode .theorem,
body.light-mode .lemma,
body.light-mode .corollary,
body.light-mode .proposition,
body.light-mode .definition,
body.light-mode .proof {
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .footnotes {
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .footnote-def {
    border-left: 3px solid #ddd !important;
    color: #333 !important;
}

body.light-mode a {
    color: #80bdff !important;
}

body.light-mode a:hover {
    color: #80bdff !important;
}

body.light-mode .timeline-comment {
    background-color: #fff !important;
    border: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .timeline-comment .timeline-comment-header {
    background-color: #fff !important;
    border-bottom: 1px solid #ddd !important;
    color: #333 !important;
}

body.light-mode .theorem::before,
body.light-mode .lemma::before,
body.light-mode .corollary::before,
body.light-mode .proposition::before,
body.light-mode .definition::before,
body.light-mode .proof::before {
    color: #333 !important;
}


body.light-mode button {
    background-color: #fff !important;
    color: #333 !important;
    /* マウスオーバー時の色 */
    border: 1px solid #ddd !important;
    /* マウスオーバー時のカーソル */
    cursor: pointer;
}

/* ===============================================
   OGPリンクカード
   =============================================== */
.link-card {
    margin: 16px 0;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    max-width: 600px;
}

.link-card:hover {
    border-color: #80bdff;
}

.link-card-container {
    display: flex;
    text-decoration: none;
    color: inherit;
    height: 140px;
}

.link-card-image {
    flex: 0 0 220px;
    max-width: 100%;
    background: #f5f5f5;
    position: relative;
    overflow: hidden;
}

.link-card-image img {
    max-width: 100%;
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center top;
    display: block;
    background: #f5f5f5;
}

.link-card-content {
    flex: 1;
    padding: 12px 16px;
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.link-card-header {
    display: none;
}

.link-card-favicon {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
}

.link-card-domain {
    font-size: 10px;
    color: #777;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.link-card-title {
    font-size: 14px;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: #333;
    line-height: 1.3;
    flex-shrink: 0;
}

.link-card-content h3 {
    margin: 0;
    font-size: 13px;
    font-weight: 600;
    line-height: 1.2;
}

.link-card-description {
    font-size: 11px;
    color: #777;
    margin: 0 0 auto 0;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex-grow: 1;
}

.link-card-footer {
    position: relative;
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    flex-shrink: 0;
}

.link-card-url {
    font-size: 9px;
    color: #999;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

.link-card-date {
    font-size: 9px;
    color: #999;
    white-space: nowrap;
}

@media (max-width: 600px) {
    .link-card-container {
        flex-direction: column;
        height: auto;
    }
    
    .link-card-image {
        flex: none;
        height: 160px;
        width: 100%;
    }
    
    .link-card-content {
        padding: 16px;
    }
}

/* ダークモード対応 */
body.dark-mode .link-card {
    border-color: #555;
    background-color: #222;
}

body.dark-mode .link-card:hover {
    border-color: #80bdff;
}

body.dark-mode .link-card-domain {
    color: #aaa;
}

body.dark-mode .link-card-title {
    color: #ddd;
}

body.dark-mode .link-card-description {
    color: #aaa;
}

body.dark-mode .link-card-url,
body.dark-mode .link-card-date {
    color: #777;
}

/* ===============================================
   記事ナビゲーション
   =============================================== */
.article-navigation {
    display: flex;
    justify-content: space-between;
    margin: 2rem 0;
    gap: 1rem;
}

.nav-item {
    flex: 1;
    max-width: 45%;
}

.nav-item:empty {
    visibility: hidden;
}

.nav-item a {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s ease;
    min-height: 80px;
    justify-content: space-between;
}

.nav-item a:hover {
    border-color: #80bdff;
    background-color: #f8f9fa;
}

.nav-direction {
    font-size: 0.875rem;
    color: #666;
    margin-bottom: 0.5rem;
}

.nav-title {
    font-weight: 600;
    line-height: 1.4;
}

.nav-next {
    text-align: right;
}

/* ===============================================
   関連記事
   =============================================== */
.related-articles {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 4px;
}

.related-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #333;
    border-bottom: 1px solid #ddd;
    padding-bottom: 0.5rem;
}

.related-item {
    margin-bottom: 0.75rem;
    padding: 0.75rem;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    background-color: #fff;
    transition: all 0.2s ease;
}

.related-item:hover {
    border-color: #80bdff;
    background-color: #f8f9fa;
}

.related-item:last-child {
    margin-bottom: 0;
}

.related-item a {
    display: block;
    text-decoration: none;
    color: inherit;
}

.related-item-title {
    font-weight: 600;
    font-size: 0.875rem;
    line-height: 1.4;
    margin-bottom: 0.5rem;
    color: #333;
}

.related-date {
    font-size: 0.75rem;
    color: #666;
    margin-bottom: 0.5rem;
}

.related-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
}

.related-tag {
    font-size: 0.7rem;
    background-color: #e5e7eb;
    color: #374151;
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
}

.related-similarity {
    font-size: 0.7rem;
    color: #666;
    margin-top: 0.25rem;
    font-style: italic;
}

.similarity-source {
    color: #999;
    font-size: 0.65rem;
    font-weight: normal;
}

/* ===============================================
   ダークモード対応
   =============================================== */
body.dark-mode .article-navigation {
    border-color: #555;
}

body.dark-mode .nav-item a {
    border-color: #555;
    background-color: #222;
    color: #ddd;
}

body.dark-mode .nav-item a:hover {
    border-color: #80bdff;
    background-color: #333;
}

body.dark-mode .nav-direction {
    color: #999;
}

body.dark-mode .related-articles {
    border-color: #555;
    background-color: #222;
}

body.dark-mode .related-title {
    color: #ddd;
    border-color: #555;
}

body.dark-mode .related-item {
    border-color: #555;
    background-color: #333;
}

body.dark-mode .related-item:hover {
    border-color: #80bdff;
    background-color: #444;
}

body.dark-mode .related-item-title {
    color: #ddd;
}

body.dark-mode .related-date {
    color: #999;
}

body.dark-mode .related-tag {
    background-color: #555;
    color: #ddd;
}

body.dark-mode .similarity-source {
    color: #777;
}


/* ===============================================
   レスポンシブデザイン
   =============================================== */
@media (max-width: 1200px) {
    .right-sidebar {
        width: 240px;
    }
}

@media (max-width: 1024px) {
    .right-sidebar {
        display: none;
    }

    .article-body {
        gap: 1rem;
    }
}

@media (max-width: 768px) {
    .article-navigation {
        flex-direction: column;
    }

    .nav-item {
        max-width: 100%;
    }

    /* モバイルでサイドバーは非表示（後で記事内に移動） */
    .side {
        display: none;
    }

    .article-body {
        flex-direction: column;
        gap: 0.5rem;
    }

    .content {
        padding: 0.25rem;
    }

    /* モバイル用のサイドバー（記事見出し下に表示） */
    .mobile-sidebar {
        display: block;
        width: 100%;
        margin: 1rem 0;
    }

    /* モバイル用の関連記事（ナビゲーション下に表示） */
    .mobile-related-articles {
        display: block;
        width: 100%;
        margin-top: 2rem;
    }

    /* デスクトップの関連記事をモバイルでは非表示 */
    .content .related-articles {
        display: none;
    }

    /* ナビゲーションの順序調整 */
    .article-navigation {
        order: 5;
    }
}</style>

    <!-- テンプレート置換用のスクリプト変数等 -->
    <script>
        page_contents = [];
    </script>

    <!-- Runner is not required. Skip this. -->
</head>

<body>
    <header class="global-header">
        <div class="header-inner">
            <!-- クリックすると sidebar を表示/非表示 -->
            <a href="https://abap34.com" class="header-logo">abap34.com</a>
            > <a href="https://abap34.com/blog">/blog</a> > <a href="https://abap34.com/posts/hurikaeri_2025_0.html">/2025年度前期振り返り</a>
        </div>

        <!-- トグルボタンとツイートボタンをグループ化 -->
        <div class="header-controls" style="display: flex;">
            <!-- ダークモードトグルボタン -->
            <button id="theme-toggle" aria-label="Toggle Dark Mode">🌙</button>
            <!-- ツイートボタン -->
            <div class="tweet-button">
                <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button"
                    data-text="2025年度前期振り返り" data-url="https://abap34.com/posts/hurikaeri_2025_0.html" data-via="abap34"> Tweet </a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>
        </div>
    </header>


    <div class="article-header">
        <div class="title">2025年度前期振り返り</div>
        <script>title = document.querySelector(".title").innerHTML;</script>
        <br>
        <div class="date">2025/09/30</div>
        <br>
        <div class="tag-placeholder">[日記, 振り返り]</div>
    </div>

    <!-- モバイル用サイドバー（記事見出し下に表示） -->
    <div class="mobile-sidebar">
<div class="sidebar">
<ul id="mobile-toc-list"></ul>
</div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const desktopToc = document.querySelector("#toc");
  const mobileToc = document.querySelector("#mobile-toc-list");
  if (desktopToc && mobileToc) {
    mobileToc.innerHTML = desktopToc.innerHTML;
  }
});
</script>

    <!-- 3) コンテンツ本体 (サイドバー + メイン本文 + 右サイドバー) -->
    <div class="article-body">

        <!-- 左サイドバー (TOC) -->
        <div class="side">
            <div class="side-sticky">
                <div class="sidebar">
                    <ul id="toc"></ul>
                </div>
            </div>
        </div>

        <!-- メイン本文 -->
        <div class="content">
            <br><br>2025年度前期の振り返りです。<br><br>去年の後期の振り返りは <url> <a href="https://www.abap34.com/posts/hurikaeri_2024_1.html">→ こちら</a> </url><br><br>過去の振り返り記事は <url> <a href="https://www.abap34.com/search?tag=%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A">→ こちら</a> </url><br><br><script>page_contents.push({
    "type":"H2",
    "id":"14",
    "title":"作った・作っているもの"
});
</script>
<h2 id="14">作った・作っているもの</h2><br><script>page_contents.push({
    "type":"H3",
    "id":"17",
    "title":"JETLS.jl (Julia の次世代 Language Server, Google Summer of Code)"
});
</script>
<h3 id="17">JETLS.jl (Julia の次世代 Language Server, Google Summer of Code)</h3><br>今年の前期に一番時間を使ったものはこれでした．<br><br><br><div class="link-card">     <a href="https://github.com/aviatesk/JETLS.jl" target="_blank" rel="noopener noreferrer" class="link-card-container">         <div class="link-card-image">             <img src="https://opengraph.githubassets.com/1223ca35b09e946f77bb5834dead3a881b1564f02d1abb7c2608c1a374b52efb/aviatesk/JETLS.jl" alt="GitHub - aviatesk/JETLS.jl: A new language server for Julia" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik00MCA0MEg4MFY4MEg0MFY0MFoiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTUiIHI9IjUiIGZpbGw9IiNDQ0MiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNNDUgNjVMNTUgNzVMNzUgNTUiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='" loading="lazy">         </div>         <div class="link-card-content">             <div>                 <div class="link-card-header">                     <img src="https://github.com/fluidicon.png" alt="" class="link-card-favicon" onerror="this.style.display='none'">                     <span class="link-card-domain">GitHub</span>                 </div>                 <h3 class="link-card-title">GitHub - aviatesk/JETLS.jl: A new language server for Julia</h3>                 <p class="link-card-description">A new language server for Julia. Contribute to aviatesk/JETLS.jl development by creating an account on GitHub.</p>             </div>             <div class="link-card-footer">                 <span class="link-card-url">github.com/aviatesk/JETLS.jl</span><br>            </div>         </div>     </a> </div><br><br><br>すでに記事にもなっていますね．<br><br><br><div class="link-card">     <a href="https://www.abap34.com/posts/gsoc2025.html" target="_blank" rel="noopener noreferrer" class="link-card-container">         <div class="link-card-image">             <img src="https://abap34.com/posts/gsoc2025/image-1.png" alt="Google Summer of Code に Proposal が採択されました！" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik00MCA0MEg4MFY4MEg0MFY0MFoiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTUiIHI9IjUiIGZpbGw9IiNDQ0MiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNNDUgNjVMNTUgNzVMNzUgNTUiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='" loading="lazy">         </div>         <div class="link-card-content">             <div>                 <div class="link-card-header">                     <img src="https://www.abap34.com/favicon.ico" alt="" class="link-card-favicon" onerror="this.style.display='none'">                     <span class="link-card-domain">abap34's blog</span>                 </div>                 <h3 class="link-card-title">Google Summer of Code に Proposal が採択されました！</h3>                 <p class="link-card-description">Google Summer of Code 2025 に参加します！ やりたいことや準備について書きます。</p>             </div>             <div class="link-card-footer">                 <span class="link-card-url">www.abap34.com/posts/gsoc2025.html</span><br>            </div>         </div>     </a> </div><br><br><br><div class="link-card">     <a href="https://www.abap34.com/posts/gsoc2025_final_report.html" target="_blank" rel="noopener noreferrer" class="link-card-container">         <div class="link-card-image">             <img src="https://abap34.com/posts/gsoc2025_final_report/image-3.png" alt="GSoC 2025 Final Report ─ Development of a New Language Server for Julia" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik00MCA0MEg4MFY4MEg0MFY0MFoiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTUiIHI9IjUiIGZpbGw9IiNDQ0MiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNNDUgNjVMNTUgNzVMNzUgNTUiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='" loading="lazy">         </div>         <div class="link-card-content">             <div>                 <div class="link-card-header">                     <img src="https://www.abap34.com/favicon.ico" alt="" class="link-card-favicon" onerror="this.style.display='none'">                     <span class="link-card-domain">abap34's blog</span>                 </div>                 <h3 class="link-card-title">GSoC 2025 Final Report ─ Development of a New Language Server for Julia</h3>                 <p class="link-card-description">This is the final report for GSoC 2025. It summarizes the development of the Julia Language Server.</p>             </div>             <div class="link-card-footer">                 <span class="link-card-url">www.abap34.com/posts/gsoc2025_final_report.html</span><br>            </div>         </div>     </a> </div><br><br><br>ざっくりいえば既存の LS と異なり<br><ul><li>Julia コンパイラのインフラを最大限活用することで保守性をあげて</li><li>advanced なさまざまな解析が可能な</li></ul><br><br>LS です． 本当の本当に初期段階なので，かなり色々な機能の開発を担当しています．<br><br>レベルが高いプログラマの人たちと一緒に仕事をするのはとても楽しかったですし， これを機に Julia コンパイラに一層詳しくなれたとてもいい機会でした．<br>いろいろな課題も認識することができ，研究ネタになりそうな話もいっぱいあり今後が楽しみです．(引き続きチームのメンバーとして頑張って行く予定です！)<br><br>また，自分の中で海外で仕事や研究をするということに対する価値観の変化もありました．<br><br>いままでは海外で学生や労働をすることは，認識しつつもリアルな選択肢の中に入ってくるまでは来ていませんでした．<br><br>ですが，日本の外にはすごい人がいっぱいいることをちゃんと認識する (わかってるつもりだったんですが) とともに，わりと選択肢として考えられるようになりました． 英語を真面目に練習したいと思います．<br><br>来年の JuliaCon (in ドイツらしいです) くらいまでには質疑応答とかスラスラできるくらいにはなっていたい．．．<br><script>page_contents.push({
    "type":"H3",
    "id":"74",
    "title":"eta (Scheme インタプリタ)"
});
</script>
<h3 id="74">eta (Scheme インタプリタ)</h3><br>Scheme (Racket) 製の Scheme インタプリタです．<br><br><div class="link-card">     <a href="https://github.com/abap34/eta" target="_blank" rel="noopener noreferrer" class="link-card-container">         <div class="link-card-image">             <img src="https://opengraph.githubassets.com/951a2aae647bd571362689d5bb80d21a2a31a009c0d17c3ecc79d96bd006671d/abap34/eta" alt="GitHub - abap34/eta: A interpreter that support first class continuation. A few seconds before surre" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik00MCA0MEg4MFY4MEg0MFY0MFoiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTUiIHI9IjUiIGZpbGw9IiNDQ0MiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNNDUgNjVMNTUgNzVMNzUgNTUiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='" loading="lazy">         </div>         <div class="link-card-content">             <div>                 <div class="link-card-header">                     <img src="https://github.com/fluidicon.png" alt="" class="link-card-favicon" onerror="this.style.display='none'">                     <span class="link-card-domain">GitHub</span>                 </div>                 <h3 class="link-card-title">GitHub - abap34/eta: A interpreter that support first class continuation. A few seconds before surre</h3>                 <p class="link-card-description">A interpreter that support first class continuation. A few seconds before surrender— Start over! - abap34/eta</p>             </div>             <div class="link-card-footer">                 <span class="link-card-url">github.com/abap34/eta</span><br>            </div>         </div>     </a> </div><br><br>call/cc, TCO などが実装されています．<br><br><figure><img src="hurikaeri_2025_0/image-2.png" ><figcaption></figcaption></figure><br><br>call/cc は初めて実装したのでとても勉強になりました． evaluator を CPS で書くことでとてもシンプルに実装されています．<br><br>また，エラー報告をなるべくちゃんとやる，というのも真面目に考えてみたのですが，それなりにいい感じになりました． 上にあるようにバイトレベルでエラーも出ますし Stack Trace も出ます．<br><br><script>page_contents.push({
    "type":"H3",
    "id":"97",
    "title":"abap34.com"
});
</script>
<h3 id="97">abap34.com</h3><br>デザインが一新されました．落ち着く未来はおそらく来なさそうです．<br><script>page_contents.push({
    "type":"H3",
    "id":"102",
    "title":"謎のスライド作成ツール"
});
</script>
<h3 id="102">謎のスライド作成ツール</h3><br>裏でコソコソ作っているものがあるのでここでコンセプトだけ紹介します．<br><br>自分はよくスライドを作ります． <url> <a href="https://speakerdeck.com/abap34">⇨ speakerdeck</a> </url><br>スライドのデザインや構成にも比較的こだわりがある方です． いまは<br><ol><li>数式やプログラムを多用する</li><li>Git 管理がしたい</li></ol><br>ということから，ほとんどのスライドは marp で作成しています．<br>おそらく <url> <a href="https://speakerdeck.com/abap34/dong-gong-da-trap-kaggleban-ji-jie-xue-xi-jiang-xi-hui-2024">東工大 traP Kaggle班 機械学習講習会 2024</a> </url> などは marp 以外ではかなり大変だったと思います．<br>一方で，自分がヘンテコなスライドばかり作ろうとするので様々な不満が出てきました．<br> (※ これは marp を使っているのに書くには本当に不当な文句です，marp が悪いとか言いたいのではなくて，自分からの需要がずれてきたという話です)<br><br>大体以下のような不満を持っています:<br><ol><li><span class="strong"> <strong>プログラムや図の更新忘れ，コピペミスをしてしまう</strong> </span></li><ol><li>データやアルゴリズムをちょっと変更したときにスライドの方をアップデートし忘れがちです．</li><li>プログラムのコピペミスをすることもあります</li></ol><li><span class="strong"> <strong>グラフを何度も貼るのが面倒</strong> </span></li><ol><li>自分は <url> <a href="https://speakerdeck.com/abap34/julia-tokyo-number-11-toku-juliadebu-kuzi-dong-wei-fen?slide=92">ここ</a> </url> からの数枚のような，連続した図による説明を多用しがちです．しかしこれをやるには毎回図を書き出しては貼るという作業が必要で，更新し直すのもとても面倒です．</li></ol><li><span class="strong"> <strong>スライド自身の情報や外部とのインタラクションなどからの生成をユーザが簡単に，際限なくできて欲しい</strong> </span></li><ol><li>BibTeX のサポート, Table of Contents の自動生成, アイコンの簡単な挿入などがしたいです</li><li>marp でも可能ですが，ものすごく簡単というわけではありません</li><li>エディタ支援を受けながらやりたいところでもあります</li></ol></ol><br><br>そこで今考えているのはスライドを programmable にすることです．<br><br>大体，次のような感じで書けるようになることを目指しています．<br><br><div class="code-block"> <pre><code class="language-python">from datetime import datetime
import matplotlib.pyplot as plt
from pathlib import Path
import pandas as pd

from yogrt.component import Slide, Page, Text, Src, Image, TwoColumn
from mydesignlib import MyTitlePage, MyHeader, MyTableOfContents

slide = Slide()
page1 = MyTitlePage(title=&quot;インライン化入門&quot;, date=datetime(), icon=GitHubIcon(&quot;abap34&quot;))
slide &lt;&lt; page1
slide &lt;&lt; Page(Text(&quot;適切なインライン化をすることで，高速化が期待できます．&quot;))

alg1_src = Path(&quot;alg1.py&quot;).read_text()
py_static_lint(alg1_src)

slide &lt;&lt; Page(
  MyHeader(&quot;アルゴリズム1: 適当なアルゴリズム&quot;, level=2),
  TwoColumn(
    Text(&quot;実装例 (Python)&quot;),
    Src(alg1_src, lang=&quot;python&quot;)
  )
)

input_data = pd.read_csv(&quot;data.csv&quot;)
result0 = some_algorithm(input_data)
graph0 = plt.plot(result0)

slide &lt;&lt; Page(
  MyHeader(&quot;途中結果その1&quot;, level=3),
  Image(graph0, caption=&quot;途中結果 その1&quot;)
)

result1 = some_algorithm(result0)
graph1 = plt.plot(result1)

slide &lt;&lt; Page(
  MyHeader(&quot;最終結果&quot;, level=2),
  Image(graph1, caption=&quot;最終結果&quot;)
)

toc_list: list[tuple[int, str]] = []
for page in slide.pages:
    for comp in page.components:
        if isinstance(comp, MyHeader) and comp.level &lt;= 2:
            toc_list.append((comp.level, comp.text))

slide.insert(2, MyTableOfContents(toc_list))

slide.export(&quot;my_slide.html&quot;)
</code></pre> </div><br>このような python のプログラムによってスライドを作成します．<br>スライドのページもコンポーネントも全て Python のオブジェクトであって，自由に操作できます．<br><br>例えば，<br><div class="code-block"> <pre><code class="language-plaintext">MyTitlePage(title=&quot;インライン化入門&quot;, date=datetime(), icon=GitHubIcon(&quot;abap34&quot;))
</code></pre> </div><br>のようにすれば時刻をわざわざ入力しなくて良いです．<br>GitHub のアイコンなどもいちいちダウンロードしなくても取得してくるやつを実装しておくだけでいいですし， 補完やチェックも容易です。<br>また，デザインに関しても <span class="inline-code"> <code>MyTitlePage</code> </span> のようなものを作ることによって marp のようにすぐに高クオリティなスライドが作れます．<br><br>ソースコードの更新忘れやコピペミスも<br><div class="code-block"> <pre><code class="language-python">alg1_src = Path(&quot;alg1.py&quot;).read_text()
py_static_lint(alg1_src)
</code></pre> </div><br>のようにすることで防げています．<br>複数グラフの貼り付けも<br><div class="code-block"> <pre><code class="language-python">input_data = pd.read_csv(&quot;data.csv&quot;)
result0 = some_algorithm(input_data)
graph0 = plt.plot(result0)

slide &lt;&lt; Page(
  MyHeader(&quot;途中結果その1&quot;, level=3),
  Image(graph0, caption=&quot;途中結果 その1&quot;)
)

result1 = some_algorithm(result0)
graph1 = plt.plot(result1)

slide &lt;&lt; Page(
  MyHeader(&quot;最終結果&quot;, level=2),
  Image(graph1, caption=&quot;最終結果&quot;)
)
</code></pre> </div><br>のように容易に実現できていますし，データを更新するだけで全て更新できます．<br>さらに<br><div class="code-block"> <pre><code class="language-python">toc_list: list[tuple[int, str]] = []
for page in slide.pages:
    for comp in page.components:
        if isinstance(comp, MyHeader) and comp.level &lt;= 2:
            toc_list.append((comp.level, comp.text))

slide.insert(2, MyTableOfContents(toc_list))
</code></pre> </div><br>のようにして Table of Contents のサポートもごく簡単なプログラムを書くだけで実現できます． 様々な拡張が簡単に実装できそうでいいなと思っています．<br><br>普通に便利そうなので，いい感じにして公開したいと思っています．<br><br>(まだ何も置かれていません)<br><br><div class="link-card">     <a href="https://github.com/abap34/yogrt" target="_blank" rel="noopener noreferrer" class="link-card-container">         <div class="link-card-image">             <img src="https://opengraph.githubassets.com/4b84c0909879c2da91c586a522a6c291b3001a9f035b48f45538cb68657d597f/abap34/yogrt" alt="GitHub - abap34/yogrt: A slide description DSL for people with a Programming Addiction." onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik00MCA0MEg4MFY4MEg0MFY0MFoiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTUiIHI9IjUiIGZpbGw9IiNDQ0MiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNNDUgNjVMNTUgNzVMNzUgNTUiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='" loading="lazy">         </div>         <div class="link-card-content">             <div>                 <div class="link-card-header">                     <img src="https://github.com/fluidicon.png" alt="" class="link-card-favicon" onerror="this.style.display='none'">                     <span class="link-card-domain">GitHub</span>                 </div>                 <h3 class="link-card-title">GitHub - abap34/yogrt: A slide description DSL for people with a Programming Addiction.</h3>                 <p class="link-card-description">A slide description DSL for people with a Programming Addiction. - abap34/yogrt</p>             </div>             <div class="link-card-footer">                 <span class="link-card-url">github.com/abap34/yogrt</span><br>            </div>         </div>     </a> </div><br><br><br><script>page_contents.push({
    "type":"H2",
    "id":"218",
    "title":"書いた・書いているもの"
});
</script>
<h2 id="218">書いた・書いているもの</h2><br>研究室に配属されたので，ゼミや輪講が始まりました．<br>なんか出席するだけでパソコンカタカタに詳しくなれてすごいぜ<br><br>輪講では <url> <a href="https://link.springer.com/book/10.1007/978-3-662-03811-6">Principles of Program Analysis</a> </url> を読みました．<br>自分が担当した範囲は Galois 接続に関連するもので，かなり面白かったのでブログ記事にしているところです．4割くらい書けたのでそろそろ出したい．<br>(wip: <url> <a href="https://github.com/abap34/abap34.com/blob/main/posts/wip_galois_connection_and_program_analysis.md">https://github.com/abap34/abap34.com/blob/main/posts/wip_galois_connection_and_program_analysis.md</a> </url>)<br><br>証明のしょうもないミスを見つけたかったのと，ついでに勉強しようと思い内容の Lean による形式化にも挑戦しています．<br><br><div class="link-card">     <a href="https://github.com/abap34/galois-connection.lean/blob/main/GaloisConnection/Basic.lean" target="_blank" rel="noopener noreferrer" class="link-card-container">         <div class="link-card-image">             <img src="https://opengraph.githubassets.com/0c20479f9096f34d68f6bf2f06080f8695641be4ceddc50d75c982fb72157eea/abap34/galois-connection.lean" alt="galois-connection.lean/GaloisConnection/Basic.lean at main · abap34/galois-connection.lean" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik00MCA0MEg4MFY4MEg0MFY0MFoiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTUiIHI9IjUiIGZpbGw9IiNDQ0MiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNNDUgNjVMNTUgNzVMNzUgNTUiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='" loading="lazy">         </div>         <div class="link-card-content">             <div>                 <div class="link-card-header">                     <img src="https://github.com/fluidicon.png" alt="" class="link-card-favicon" onerror="this.style.display='none'">                     <span class="link-card-domain">GitHub</span>                 </div>                 <h3 class="link-card-title">galois-connection.lean/GaloisConnection/Basic.lean at main · abap34/galois-connection.lean</h3>                 <p class="link-card-description">Contribute to abap34/galois-connection.lean development by creating an account on GitHub.</p>             </div>             <div class="link-card-footer">                 <span class="link-card-url">github.com/abap34/galois-connection.lean/blob/m...</span><br>            </div>         </div>     </a> </div><br><br><br>他にもいちおう外に書いたブログなどがあります．<br><br><br><div class="link-card">     <a href="https://hack.nikkei.com/blog/trap_kaggle_competition_2025/" target="_blank" rel="noopener noreferrer" class="link-card-container">         <div class="link-card-image">             <img src="https://hack.nikkei.com/images/ogp/trap_kaggle_competition_2025.png" alt="東京科学大学デジタル創作同好会 traP と共同でデータ分析コンペを開催しました！ — HACK The Nikkei" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik00MCA0MEg4MFY4MEg0MFY0MFoiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTUiIHI9IjUiIGZpbGw9IiNDQ0MiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNNDUgNjVMNTUgNzVMNzUgNTUiIHN0cm9rZT0iI0NDQyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='" loading="lazy">         </div>         <div class="link-card-content">             <div>                 <div class="link-card-header">                     <img src="https://hack.nikkei.com/favicon.ico" alt="" class="link-card-favicon" onerror="this.style.display='none'">                     <span class="link-card-domain">hack.nikkei.com</span>                 </div>                 <h3 class="link-card-title">東京科学大学デジタル創作同好会 traP と共同でデータ分析コンペを開催しました！ — HACK The Nikkei</h3>                 <p class="link-card-description">2025年3月に東京科学大学デジタル創作同好会 traP と開催したデータ分析コンペについて紹介します。</p>             </div>             <div class="link-card-footer">                 <span class="link-card-url">hack.nikkei.com/blog/trap_kaggle_competition_2025/</span><br>            </div>         </div>     </a> </div><br><br><br>後期はゼミなどの資料も出せる感じにして公開していきたいですね．<br><br><script>page_contents.push({
    "type":"H2",
    "id":"259",
    "title":"その他"
});
</script>
<h2 id="259">その他</h2><br><ul><li>後期の Contributions 数は 647 でした．(<span class="inline-code"> <code>curl &quot;https://github-contributions-api.deno.dev/abap34.json?flat=true&quot; | jq &#39;[.contributions[] | select(.date &gt;= &quot;2025-04-01&quot;) | .contributionCount] | add&#39;</code> </span>)</li><li>しばらくいたインターンをやめました．とてもいいところだったのでポジキャンするなどして恩返ししていきたい．</li><li>論文の管理用のちょっとしたツールを作ってもらいました． <url> <a href="https://github.com/abap34/theke">https://github.com/abap34/theke</a> </url> LLM 要約とか依存関係のグラフが見れるやつです．自分で使うくらいならまぁ便利ではありますがクオリティは... 自分からの需要がちゃんとわかったら自分で真面目に作りたいですね．</li><li>2 年くらい前にとある OSS に投げていたもののレビューが放置されていた PR が急にレビュー & マージされてびっくりしました．どうも Copilot がレビューに導入されてキューが動いたということらしいです．いい話だなと思いました．</li><li>いい包丁を買いました．QoL が上がりました．</li><li>家にホワイトボードを設置しました．QoL が爆上がりしました．</li><li>研究室はめちゃくちゃ居心地が良くて楽しいです</li><ul><li>どこもこんな感じかと思っていたんですが，友達に聞いた感じだとそうでもないらしいので，とてもラッキーだったなと思います．</li><li>ふらっと来たら先生や先輩がいて，普通に同じテーブルで弁当食べながら変なコンパイラの話などしていると言ったらびっくりされました</li></ul><li>東京ヤクルト... 😢</li><li>卒業が半年遅れる予定です．単位が足りていないとか院試に落ちたわけではなく(バカデカボイス)，開発と研究に集中するための措置です．幸い GSoC に採択されたりそのほか労働のおかげで金銭的な問題がなんとかなりそうだったのでこういう感じになりました．生まれた時間を有効に使っていきたいと思います．</li></ul><br><script>page_contents.push({
    "type":"H2",
    "id":"291",
    "title":"抱負など"
});
</script>
<h2 id="291">抱負など</h2><br>この半年だけでもエーアイの発展も含め環境が変わりつつありますね．<br>自分も簡単なタスクは Claude Code に丸投げすることが増えてきたので時代の変化を感じるところです．<br><br>他にも地元の友達は就職していたり，もう子供がいたり (！)<br>優秀な同期は何人か卒業していたり (かたや卒業したくなくて騒いでるのに)，<br>海外に行ってしまう人もいたり (かたや卒業したくなくて騒いでるのに) (寂しい)<br>自分の周辺でも色々変化を感じています．<br><br>自分は実家が寺で父は僧侶をしているんですが，今まで家がバカみたいに広くてウケるな程度の感想しか持っていませんでした． が，最近になって割と影響を受けているなと感じることが増えてきました．(※ スピリチュアル的なのにハマっているわけではないです)<br><br>そのうちの一つを紹介すると，「刹那滅」という言葉があります． すごくざっくりいうと，「全ての事物は瞬間ごとに消滅と生成を繰り返している」という主張で,諸行無常みたいなのと似ている話です． (こっちの方が主張として真に強いですが)<br><br>もちろん物理的に本当にそうなっているとかそういう話をしたいわけではないんですが，自分は割とこの考え方が好きです．<br><br>あまり自分を規定しすぎずに，そのとき興味があることに対して真面目に取り組めていけたらと思います．<br><br>とりあえずこの文章をタイプしているときの自分は一貫してプログラミング言語について考えるのが好きなようなので， 引き続き研究頑張っていきます 💪💪<br><br><script>page_contents.push({
    "type":"H2",
    "id":"323",
    "title":"今日の一曲"
});
</script>
<h2 id="323">今日の一曲</h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/mNpPQXMgtmw?si=eRJwd-NXS_LygD6t" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br><div class="footnote"></div>

            <hr>

            <!-- 記事ナビゲーション -->
            <div class="article-navigation">

                <div class="nav-item nav-prev">
                    <a href="https://abap34.com/posts/gsoc2025_final_report.html">
                        <div class="nav-direction">← 前の記事</div>
                        <div class="nav-title">GSoC 2025 Final Report ─ Development of a New Language Server for Julia</div>
                    </a>
                </div>
<div class="nav-item nav-next"></div>
</div>

            <!-- モバイル用関連記事（一番下に表示） -->
            <div class="mobile-related-articles">
<div class="related-articles tag-related">
<h3 class="related-title">同じようなタグの記事</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2024_1.html">
                            <div class="related-item-title">2024年度後期振り返り</div>
                            <div class="related-date">2025/03/31</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2024_0.html">
                            <div class="related-item-title">2024年度前期振り返り</div>
                            <div class="related-date">2024/09/30</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2023_1.html">
                            <div class="related-item-title">2023年度後期振り返り</div>
                            <div class="related-date">2024/03/29</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>
</div>
<div class="related-articles tfidf-related">
<h3 class="related-title">同じような内容の記事</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2024_1.html">
                            <div class="related-item-title">2024年度後期振り返り</div>
                            <div class="related-date">2025/03/31</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2023_1.html">
                            <div class="related-item-title">2023年度後期振り返り</div>
                            <div class="related-date">2024/03/29</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>
</div>
</div>

            <hr>
            <!-- コメント欄 (Utterances) -->
            <script src="https://utteranc.es/client.js" repo="abap34/abap34com-comment" issue-term="og:title"
                label="comment" theme="github-light" crossorigin="anonymous" async>
                </script>
        </div>

        <!-- 右サイドバー (関連記事) -->
        <div class="right-sidebar">
            <div class="right-sidebar-sticky">
                <div class="related-articles tag-related">
<h3 class="related-title">同じようなタグの記事</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2024_1.html">
                            <div class="related-item-title">2024年度後期振り返り</div>
                            <div class="related-date">2025/03/31</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2024_0.html">
                            <div class="related-item-title">2024年度前期振り返り</div>
                            <div class="related-date">2024/09/30</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2023_1.html">
                            <div class="related-item-title">2023年度後期振り返り</div>
                            <div class="related-date">2024/03/29</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>
</div>
<div class="related-articles tfidf-related">
<h3 class="related-title">同じような内容の記事</h3>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2024_1.html">
                            <div class="related-item-title">2024年度後期振り返り</div>
                            <div class="related-date">2025/03/31</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>

                    <div class="related-item">
                        <a href="https://abap34.com/posts/hurikaeri_2023_1.html">
                            <div class="related-item-title">2023年度後期振り返り</div>
                            <div class="related-date">2024/03/29</div>
                            <div class="related-tags"><span class="related-tag">#日記</span> <span class="related-tag">#振り返り</span></div>
                            </a>
                    </div>
</div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; abap34</p>
    </footer>

    <!-- 4) TOC 自動生成スクリプトなど -->
    <script>
        const tocContainer = document.querySelector("#toc");
        const tocTitle = document.createElement("div");
        tocTitle.innerHTML = title;
        tocTitle.classList.add("toc_title");
        tocContainer.appendChild(tocTitle);

        // TOC 要素生成
        page_contents.forEach(item => {
            if (item.type == "H1" || item.type === "H2" || item.type === "H3") {
                const listItem = document.createElement("li");
                listItem.innerHTML = `<a href="#${item.id}">${item.title}</a>`;
                listItem.classList.add("toc_" + item.type);
                tocContainer.appendChild(listItem);
            }
        });

        // IntersectionObserver でスクロール時に active 更新
        const options = {
            root: null,
            rootMargin: "-50% 0px",
            threshold: 0
        };
        const observer = new IntersectionObserver(onIntersection, options);

        page_contents.forEach(item => {
            const element = document.getElementById(item.id);
            if (element) observer.observe(element);
        });

        const first_item = document.querySelector(`#toc a[href="#${page_contents[0].id}"]`);
        first_item.classList.add("active");
        let prev_item = first_item;

        function onIntersection(entries) {
            entries.forEach(entry => {
                const id = entry.target.id;
                const tocItem = document.querySelector(`#toc a[href="#${id}"]`);
                if (tocItem) {
                    if (entry.isIntersecting) {
                        tocItem.classList.add("active");
                        prev_item.classList.remove("active");
                        prev_item = tocItem;
                    }
                }
            });
        }

        // タグ装飾
        let tag = document.querySelector(".tag-placeholder").innerHTML;
        document.querySelector(".tag-placeholder").innerHTML = "";
        tag = tag.replace("[", "").replace("]", "").split(", ").map(t => t.trim());

        tag.forEach(t => {
            const each_tag = document.createElement("span");
            each_tag.classList.add("tag");
            each_tag.innerHTML = "<a href='https://abap34.com/search?tag=" + t + "'> # " + t + "</a>";
            document.querySelector(".tag-placeholder").appendChild(each_tag);
        });

        function applyTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').textContent = '☀️';
            } else {
                document.body.classList.remove('dark-mode');
                document.getElementById('theme-toggle').textContent = '🌙';
            }
        }

        // 初期表示：localStorage に保存されたテーマがあればそれを適用し、なければ OS の設定に従う
        let storedTheme = localStorage.getItem('theme');
        if (storedTheme) {
            applyTheme(storedTheme);
        } else {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                applyTheme('dark');
                localStorage.setItem('theme', 'dark');
            } else {
                applyTheme('light');
                localStorage.setItem('theme', 'light');
            }
        }

        const themeToggleButton = document.getElementById('theme-toggle');

        // トグルボタンのクリックイベント
        themeToggleButton.addEventListener('click', function () {
            let newTheme = document.body.classList.contains('dark-mode') ? 'light' : 'dark';
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        });


        // コードブロックに行数とコピー機能を追加
        /// コードブロックに行数とコピー機能を追加（pre/code は保持）
        (() => {
            // 付随スタイル（必要なら一度だけ注入）
            if (!document.getElementById('cb-ln-style')) {
                const style = document.createElement('style');
                style.id = 'cb-ln-style';
                style.textContent = `
.cb{position:relative;margin:1rem 0;border:1px solid #e0e0e0;border-radius:.4rem;overflow:hidden}
.cb-toolbar{display:flex;justify-content:space-between;align-items:center;font:12px/1.2 ui-monospace,Menlo,Consolas,monospace;background:#f7f7f7;padding:.35rem .5rem;border-bottom:1px solid #e0e0e0}
.cb-lang{opacity:.7}
.cb-copy{cursor:pointer;border:0;background:#eee;padding:.25rem .5rem;border-radius:.25rem}
.cb-copy:active{transform:translateY(1px)}
.cb-body{display:grid;grid-template-columns:auto 1fr}
.cb-gutter{margin:0; padding:0rem .5rem .5rem .5rem; list-style:none; counter-reset:ln; text-align:right; user-select:none; overflow:auto; border-right:1px solid #e0e0e0}
.cb-gutter li{counter-increment:ln; line-height:1.5; font:13px/1.5 ui-monospace,Menlo,Consolas,monospace; opacity:.55}
.cb-gutter li::before{content: counter(ln);}
.cb-pre{margin:0; padding:.5rem .75rem; overflow:auto}
.cb.dark{border-color:#333}
.cb.dark .cb-toolbar{background:#2b2b2b;border-bottom-color:#333;color:#ddd}
.cb.dark .cb-copy{background:#3a3a3a;color:#eee}
.cb.dark .cb-gutter{border-right-color:#333}
`;
                document.head.appendChild(style);
            }

            const isDark = () => document.body.classList.contains('dark-mode');

            document.querySelectorAll('pre > code').forEach((code) => {
                const pre = code.parentElement;
                if (pre.dataset.enhanced === '1') return;

                // 行数を数える（テキストで数えるのでハイライトは維持）
                const text = code.textContent.replace(/\n$/, '');
                const lineCount = Math.max(1, text.split('\n').length);

                // ラッパ生成
                const wrapper = document.createElement('div');
                wrapper.className = 'cb' + (isDark() ? ' dark' : '');

                const toolbar = document.createElement('div');
                toolbar.className = 'cb-toolbar';

                // 言語表示（language-xxx を拾う）
                const langClass = [...code.classList].find(c => c.startsWith('language-')) || '';
                const lang = (langClass.replace('language-', '') || code.getAttribute('data-lang') || 'code').toUpperCase();
                const langSpan = document.createElement('span');
                langSpan.className = 'cb-lang';
                langSpan.textContent = lang;

                const copyBtn = document.createElement('button');
                copyBtn.type = 'button';
                copyBtn.className = 'cb-copy';
                copyBtn.textContent = 'Copy';

                toolbar.append(langSpan, copyBtn);

                // 本体（行番号 + 既存 pre/code）
                const body = document.createElement('div');
                body.className = 'cb-body';

                // 行番号ガター
                const gutter = document.createElement('ol');
                gutter.className = 'cb-gutter';
                for (let i = 0; i < lineCount; i++) {
                    const li = document.createElement('li');
                    gutter.appendChild(li);
                }

                // 既存 pre を移設してクラス付与のみ
                pre.classList.add('cb-pre');
                const container = document.createElement('div');
                container.appendChild(pre.cloneNode(true)); // スクロール同期のためクローンせず移動でもよい
                // 置換時に元の pre を差し替える
                pre.replaceWith(wrapper);
                // wrapper 配下を構築
                wrapper.appendChild(toolbar);
                wrapper.appendChild(body);
                body.appendChild(gutter);
                body.appendChild(container.firstChild); // 元の pre

                // コピー
                copyBtn.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(text);
                        const prev = copyBtn.textContent;
                        copyBtn.textContent = 'Copied';
                        setTimeout(() => (copyBtn.textContent = prev), 1200);
                    } catch {
                        copyBtn.textContent = 'Failed';
                        setTimeout(() => (copyBtn.textContent = 'Copy'), 1200);
                    }
                });

                // スクロール同期
                const preEl = wrapper.querySelector('pre.cb-pre');
                const sync = () => { gutter.scrollTop = preEl.scrollTop; };
                preEl.addEventListener('scroll', sync);

                // ダークモード同期
                const mo = new MutationObserver(() => {
                    if (isDark()) wrapper.classList.add('dark'); else wrapper.classList.remove('dark');
                });
                mo.observe(document.body, { attributes: true, attributeFilter: ['class'] });

                // 完了フラグ
                pre.dataset.enhanced = '1';
            });
        })();



    </script>

    </script>

</body>

</html>
