<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Life Game</title>
    <style>
        #container {
            position: relative;
            width: 600px;
            height: 400px;
        }

        #overlay {
            position: absolute;
            left: 0;
            top: 0;
            z-index: 1;
            width: 600px;
            height: 400px;
        }

        /*  position next of overray */
        #canvas {
            /* 枠線 */
            padding: 20px;
            /* 上下に余白 */
            margin: 20px 0;
            position: absolute;
            left: 100;
            top: 300;
            z-index: 2;
            width: 600px;
            height: 300px;
        }

        
    </style>
</head>

<body>
    <div id="overlay"></div>
    <div class="sidebar">
        <a href="#about">About Me</a>
        <a href="#projects">Projects</a>
        <a href="#contact">Contact Me</a>
    </div>
    <header>
        <img src="myicon.png" alt="myicon" width="100" height="100">
        <h1>Welcome to abap34's Website</h1>
    </header>
    <main>
        <section id="about">
            <h2>About Me</h2>
            <p>Hi, my name is abap34 and I'm a first-year computer science student at Tokyo Institute of Technology.
                I have a strong interest in both the engineering and mathematical aspects of machine learning. </p>
            <p>You can find me on <a href="https://github.com/abap34/">GitHub</a> and <a
                    href="https://twitter.com/abap34/">Twitter</a>.</p>
        </section>
        <section id="projects">
            <h2>Projects</h2>
            <li><a href="https://github.com/abap34/JITrench.jl">JITrench.jl</a>: Lightweight Automatic Differentiation &
                DeepLearning Framework implemented in pure Julia.</li>
        </section>
        <section id="contact">
            mail: abap0002@gmail[.]com
        </section>

    </main>
    <footer>
        <p>&copy; 2023 abap34</p>
    </footer>
    </div>

    <div id="canvas">
    <canvas id="background"></canvas>
    <button id="bomb" onclick="bomb()"></button>
    <script>
        // physics simulation of bound ball
        // when not clicked, ball is move under gravity
        // whenbomb button clicked, the ball get random velocity
        // all time, ball draw trajectory
        // when ball hit the wall, it bounce back

        // physical parameters
        const g = 0.1; // gravity
        const e = 0.8; // restitution coefficient
        const dt = 0.1; // time step
        const r = 10; // radius of ball
        const m = 1; // mass of ball

        // canvas parameters
        const canvas = document.getElementById('background');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        // canvas draw interface
        function drawCircle(x, y, r) {
            ctx.beginPath();
            ctx.arc(x, y, r, 0, 2 * Math.PI);
        }

        // Ball class
        class Ball {
            constructor(x, y, vx, vy) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
            }

            // update position and velocity
            update() {
                this.x += this.vx * dt;
                this.y += this.vy * dt;
                this.vy += g * dt;
                if (this.x < r) {
                    this.x = r;
                    this.vx *= -e;
                }
                if (this.x > width - r) {
                    this.x = width - r;
                    this.vx *= -e;
                }
                if (this.y < r) {
                    this.y = r;
                    this.vy *= -e;
                }
                if (this.y > height - r) {
                    this.y = height - r;
                    this.vy *= -e;
                }
            }

            // draw ball
            draw() {
                drawCircle(this.x, this.y, r);
            }
        }

        // initialize ball
        let ball = new Ball(width / 2, r, 0, 0);

        // draw trajectory
        function drawTrajectory() {
            ctx.beginPath();
            ctx.moveTo(ball.x, ball.y);
            let x = ball.x;
            let y = ball.y;
            let vx = -ball.vx;
            let vy = -ball.vy;
            for (let i = 0; i < 100; i++) {
                x += vx * dt;
                y += vy * dt;
                vy += g * dt;
                if (x < r) {
                    x = r;
                    vx *= -e;
                }
                if (x > width - r) {
                    x = width - r;
                    vx *= -e;
                }
                if (y < r) {
                    y = r;
                    vy *= -e;
                }
                if (y > height - r) {
                    y = height - r;
                    vy *= -e;
                }
                ctx.lineTo(x, y);
            }
            ctx.stroke();
        }

        // draw ball
        function draw() {
            ctx.clearRect(0, 0, width, height);
            drawTrajectory();
            ball.draw();
        }

        // update ball
        function update() {
            ball.update();
        }

        // bomb function
        function bomb() {
            ball.vx = Math.random() * 20 - 5;
            ball.vy = Math.random() * 20 - 5;
        }

        // main loop per 1ms
        setInterval(function () {
            update();
            draw();
        }, 1);


        
    </script>
    </div>

</body>


</html>